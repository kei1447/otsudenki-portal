[{"filePath":"C:\\Users\\hibino\\otsudenki-portal\\eslint.config.mjs","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hibino\\otsudenki-portal\\next.config.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hibino\\otsudenki-portal\\postcss.config.mjs","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hibino\\otsudenki-portal\\src\\app\\(main)\\inventory\\actions.ts","messages":[],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":19,"column":31,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":19,"endColumn":34,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[623,626],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[623,626],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":57,"column":32,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":57,"endColumn":35,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1757,1760],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1757,1760],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":114,"column":32,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":114,"endColumn":35,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3524,3527],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3524,3527],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":637,"column":29,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":637,"endColumn":32,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[18721,18724],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[18721,18724],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":762,"column":31,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":762,"endColumn":34,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[22051,22054],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[22051,22054],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hibino\\otsudenki-portal\\src\\app\\(main)\\inventory\\inventory-list.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":254,"column":24,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":254,"endColumn":27,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9063,9066],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9063,9066],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\nC:\\Users\\hibino\\otsudenki-portal\\src\\app\\(main)\\inventory\\inventory-list.tsx:259:5\n  257 |\n  258 |   useEffect(() => {\n> 259 |     loadHistory();\n      |     ^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  260 |   }, [loadHistory]);\n  261 |\n  262 |   const handleDelete = async (id: string, type: string) => {","line":259,"column":5,"nodeType":null,"endLine":259,"endColumn":16}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport { useState, useMemo, useEffect, useCallback } from 'react';\nimport { getProductHistory, deleteMovement } from './actions';\n\ntype InventoryItem = {\n  product_id: number;\n  stock_raw: number;\n  stock_finished: number;\n  stock_defective: number;\n  last_updated_at: string;\n  products: {\n    name: string;\n    product_code: string;\n    color: string | null;\n    partners: { name: string } | null;\n  } | null;\n};\n\ntype Movement = {\n  id: string;\n  movement_type: string;\n  quantity_change: number;\n  created_at: string;\n  reason: string | null;\n  defect_reason: string | null;\n  due_date: string | null;\n  profiles: { email: string } | null;\n};\n\nexport default function InventoryList({\n  inventory,\n}: {\n  inventory: InventoryItem[];\n}) {\n  // åœ¨åº«ã‚¼ãƒ­è¡¨ç¤ºãƒ•ãƒ©ã‚° (ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆOFF)\n  const [showZeroStock, setShowZeroStock] = useState(false);\n\n  const groupedData = useMemo(() => {\n    const groups = new Map<string, InventoryItem[]>();\n    inventory.forEach((item) => {\n      // ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°å‡¦ç†\n      const totalStock =\n        item.stock_raw + item.stock_finished + item.stock_defective;\n      if (!showZeroStock && totalStock === 0) return;\n\n      const partnerName = item.products?.partners?.name || 'ãã®ä»–';\n      if (!groups.has(partnerName)) groups.set(partnerName, []);\n      groups.get(partnerName)?.push(item);\n    });\n    return groups;\n  }, [inventory, showZeroStock]);\n\n  return (\n    <div className=\"space-y-4\">\n      {/* è¡¨ç¤ºåˆ‡æ›¿ã‚¹ã‚¤ãƒƒãƒ */}\n      <div className=\"flex justify-end mb-2\">\n        <label className=\"inline-flex items-center cursor-pointer\">\n          <input\n            type=\"checkbox\"\n            className=\"sr-only peer\"\n            checked={showZeroStock}\n            onChange={(e) => setShowZeroStock(e.target.checked)}\n          />\n          <div className=\"relative w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600\"></div>\n          <span className=\"ms-3 text-sm font-medium text-gray-700\">\n            åœ¨åº«ã‚¼ãƒ­ã‚‚å«ã‚ã¦è¡¨ç¤º\n          </span>\n        </label>\n      </div>\n\n      {Array.from(groupedData.entries()).map(([partnerName, items]) => (\n        <InventoryAccordion\n          key={partnerName}\n          partnerName={partnerName}\n          items={items}\n        />\n      ))}\n\n      {inventory.length === 0 && (\n        <div className=\"p-8 text-center bg-gray-50 rounded-lg text-gray-500\">\n          ãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚Šã¾ã›ã‚“\n        </div>\n      )}\n    </div>\n  );\n}\n\nfunction InventoryAccordion({\n  partnerName,\n  items,\n}: {\n  partnerName: string;\n  items: InventoryItem[];\n}) {\n  const [isOpen, setIsOpen] = useState(false);\n  const totalRaw = items.reduce((sum, i) => sum + i.stock_raw, 0);\n  const totalFinished = items.reduce((sum, i) => sum + i.stock_finished, 0);\n  const totalDefective = items.reduce((sum, i) => sum + i.stock_defective, 0);\n\n  // å±¥æ­´ãƒ¢ãƒ¼ãƒ€ãƒ«ç®¡ç†\n  const [historyTarget, setHistoryTarget] = useState<{\n    id: number;\n    name: string;\n  } | null>(null);\n\n  return (\n    <div className=\"border border-gray-200 rounded-lg bg-white overflow-hidden shadow-sm\">\n      <button\n        onClick={() => setIsOpen(!isOpen)}\n        className=\"w-full flex items-center justify-between p-4 bg-gray-50 hover:bg-gray-100 transition-colors\"\n      >\n        <div className=\"flex items-center gap-3\">\n          <span\n            className={`transform transition-transform text-gray-400 ${isOpen ? 'rotate-90' : ''}`}\n          >\n            â–¶\n          </span>\n          <span className=\"font-bold text-lg text-gray-800\">{partnerName}</span>\n          <span className=\"text-sm text-gray-500\">({items.length}è£½å“)</span>\n        </div>\n        <div className=\"flex gap-4 text-sm\">\n          <div className=\"flex flex-col items-end\">\n            <span className=\"text-xs text-gray-500\">ç”Ÿåœ°</span>\n            <span className=\"font-bold\">{totalRaw.toLocaleString()}</span>\n          </div>\n          <div className=\"flex flex-col items-end border-l pl-4 border-gray-300\">\n            <span className=\"text-xs text-gray-500\">å®Œæˆ</span>\n            <span className=\"font-bold text-blue-700\">\n              {totalFinished.toLocaleString()}\n            </span>\n          </div>\n          {totalDefective > 0 && (\n            <div className=\"flex flex-col items-end border-l pl-4 border-gray-300\">\n              <span className=\"text-xs text-gray-500\">ä¸è‰¯</span>\n              <span className=\"font-bold text-red-600\">\n                {totalDefective.toLocaleString()}\n              </span>\n            </div>\n          )}\n        </div>\n      </button>\n\n      {isOpen && (\n        <div className=\"border-t border-gray-200\">\n          <table className=\"min-w-full divide-y divide-gray-200\">\n            <thead className=\"bg-gray-50\">\n              <tr>\n                <th className=\"px-6 py-2 text-left text-xs font-medium text-gray-500 w-32\">\n                  å‹ç•ª\n                </th>\n                <th className=\"px-6 py-2 text-left text-xs font-medium text-gray-500\">\n                  å“å\n                </th>\n                <th className=\"px-6 py-2 text-right text-xs font-medium text-gray-500 w-20 bg-yellow-50/50\">\n                  ç”Ÿåœ°\n                </th>\n                <th className=\"px-6 py-2 text-right text-xs font-medium text-gray-500 w-20 bg-blue-50/50\">\n                  å®Œæˆ\n                </th>\n                <th className=\"px-6 py-2 text-right text-xs font-medium text-gray-500 w-20 bg-red-50/50\">\n                  ä¸è‰¯\n                </th>\n                <th className=\"px-6 py-2 text-center text-xs font-medium text-gray-500 w-20\">\n                  å±¥æ­´\n                </th>\n              </tr>\n            </thead>\n            <tbody className=\"divide-y divide-gray-200 bg-white\">\n              {items.map((item) => (\n                <tr key={item.product_id} className=\"hover:bg-gray-50\">\n                  <td className=\"px-6 py-3 text-sm font-mono text-gray-900\">\n                    {item.products?.product_code}\n                  </td>\n                  <td className=\"px-6 py-3 text-sm text-gray-600\">\n                    {item.products?.name}{' '}\n                    <span className=\"text-xs text-gray-400\">\n                      {item.products?.color}\n                    </span>\n                  </td>\n                  <td className=\"px-6 py-3 text-right text-sm font-bold bg-yellow-50/30\">\n                    {item.stock_raw > 0 ? item.stock_raw.toLocaleString() : '-'}\n                  </td>\n                  <td className=\"px-6 py-3 text-right text-sm font-bold text-blue-700 bg-blue-50/30\">\n                    {item.stock_finished > 0\n                      ? item.stock_finished.toLocaleString()\n                      : '-'}\n                  </td>\n                  <td className=\"px-6 py-3 text-right text-sm font-bold text-red-600 bg-red-50/30\">\n                    {item.stock_defective > 0\n                      ? item.stock_defective.toLocaleString()\n                      : '-'}\n                  </td>\n                  <td className=\"px-6 py-3 text-center\">\n                    <button\n                      onClick={() =>\n                        setHistoryTarget({\n                          id: item.product_id,\n                          name: `${item.products?.product_code} ${item.products?.name}`,\n                        })\n                      }\n                      className=\"text-gray-400 hover:text-indigo-600\"\n                      title=\"å±¥æ­´ã‚’ç¢ºèªãƒ»ä¿®æ­£\"\n                    >\n                      <svg\n                        xmlns=\"http://www.w3.org/2000/svg\"\n                        fill=\"none\"\n                        viewBox=\"0 0 24 24\"\n                        strokeWidth={1.5}\n                        stroke=\"currentColor\"\n                        className=\"w-5 h-5\"\n                      >\n                        <path\n                          strokeLinecap=\"round\"\n                          strokeLinejoin=\"round\"\n                          d=\"M12 6v6h4.5m4.5 0a9 9 0 11-18 0 9 9 0 0118 0z\"\n                        />\n                      </svg>\n                    </button>\n                  </td>\n                </tr>\n              ))}\n            </tbody>\n          </table>\n        </div>\n      )}\n\n      {historyTarget && (\n        <HistoryModal\n          productId={historyTarget.id}\n          productName={historyTarget.name}\n          onClose={() => setHistoryTarget(null)}\n        />\n      )}\n    </div>\n  );\n}\n\nfunction HistoryModal({\n  productId,\n  productName,\n  onClose,\n}: {\n  productId: number;\n  productName: string;\n  onClose: () => void;\n}) {\n  const [history, setHistory] = useState<Movement[]>([]);\n  const [isLoading, setIsLoading] = useState(true);\n\n  const loadHistory = useCallback(async () => {\n    setIsLoading(true);\n    const data = await getProductHistory(productId);\n    setHistory(data as any[]);\n    setIsLoading(false);\n  }, [productId]);\n\n  useEffect(() => {\n    loadHistory();\n  }, [loadHistory]);\n\n  const handleDelete = async (id: string, type: string) => {\n    if (!confirm('ã“ã®æ“ä½œã‚’å–ã‚Šæ¶ˆã—ã¾ã™ã‹ï¼Ÿ\\nåœ¨åº«æ•°ãŒå…ƒã«æˆ»ã‚Šã¾ã™ã€‚')) return;\n    // å‡ºè·ã®å‰Šé™¤ã¯æ³¨æ„å–šèµ·\n    if (type === 'shipping') {\n      if (\n        !confirm(\n          'è­¦å‘Š: å‡ºè·ãƒ‡ãƒ¼ã‚¿ã‚’å–ã‚Šæ¶ˆã™ã¨åœ¨åº«ã¯æˆ»ã‚Šã¾ã™ãŒã€ç´å“æ›¸(å£²ä¸Š)ãƒ‡ãƒ¼ã‚¿ã¯åˆ¥é€”å‰Šé™¤ãŒå¿…è¦ã§ã™ã€‚\\nç¶šè¡Œã—ã¾ã™ã‹ï¼Ÿ'\n        )\n      )\n        return;\n    }\n\n    const res = await deleteMovement(id);\n    if (res.success) {\n      alert('å–ã‚Šæ¶ˆã—ã¾ã—ãŸ');\n      loadHistory(); // ãƒªãƒ­ãƒ¼ãƒ‰\n    } else {\n      alert('ã‚¨ãƒ©ãƒ¼: ' + res.message);\n    }\n  };\n\n  // è¡¨ç¤ºåå¤‰æ›ãƒ˜ãƒ«ãƒ‘ãƒ¼\n  const getTypeLabel = (type: string) => {\n    switch (type) {\n      case 'receiving':\n        return (\n          <span className=\"bg-yellow-100 text-yellow-800 px-2 py-0.5 rounded text-xs\">\n            å—å…¥\n          </span>\n        );\n      case 'production_raw':\n        return (\n          <span className=\"bg-gray-100 text-gray-800 px-2 py-0.5 rounded text-xs\">\n            æ¶ˆè²»\n          </span>\n        );\n      case 'production_finished':\n        return (\n          <span className=\"bg-blue-100 text-blue-800 px-2 py-0.5 rounded text-xs\">\n            å®Œæˆ\n          </span>\n        );\n      case 'production_defective':\n        return (\n          <span className=\"bg-red-100 text-red-800 px-2 py-0.5 rounded text-xs\">\n            ä¸è‰¯\n          </span>\n        );\n      case 'shipping':\n        return (\n          <span className=\"bg-green-100 text-green-800 px-2 py-0.5 rounded text-xs\">\n            å‡ºè·\n          </span>\n        );\n      case 'repair':\n        return (\n          <span className=\"bg-blue-50 text-blue-600 px-2 py-0.5 rounded text-xs border border-blue-200\">\n            æ‰‹ç›´ã—\n          </span>\n        );\n      case 'return_defective':\n        return (\n          <span className=\"bg-gray-100 text-gray-500 px-2 py-0.5 rounded text-xs border border-gray-300\">\n            è¿”å´\n          </span>\n        );\n      default:\n        return type;\n    }\n  };\n\n  return (\n    <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 p-4\">\n      <div className=\"bg-white rounded-lg shadow-xl w-full max-w-2xl max-h-[80vh] flex flex-col\">\n        <div className=\"p-4 border-b flex justify-between items-center bg-gray-50 rounded-t-lg\">\n          <h3 className=\"font-bold text-gray-800\">å±¥æ­´ãƒ»ä¿®æ­£: {productName}</h3>\n          <button\n            onClick={onClose}\n            className=\"text-2xl text-gray-400 hover:text-gray-600\"\n          >\n            &times;\n          </button>\n        </div>\n\n        <div className=\"flex-1 overflow-y-auto p-4\">\n          {isLoading ? (\n            <div className=\"text-center py-8 text-gray-500\">èª­ã¿è¾¼ã¿ä¸­...</div>\n          ) : history.length === 0 ? (\n            <div className=\"text-center py-8 text-gray-500\">\n              å±¥æ­´ãŒã‚ã‚Šã¾ã›ã‚“\n            </div>\n          ) : (\n            <table className=\"min-w-full text-sm\">\n              <thead className=\"bg-gray-50 sticky top-0\">\n                <tr>\n                  <th className=\"px-4 py-2 text-left text-gray-500\">æ—¥æ™‚</th>\n                  <th className=\"px-4 py-2 text-left text-gray-500\">æ“ä½œ</th>\n                  <th className=\"px-4 py-2 text-right text-gray-500\">æ•°é‡</th>\n                  <th className=\"px-4 py-2 text-left text-gray-500\">\n                    è©³ç´°ãƒ»ç†ç”±\n                  </th>\n                  <th className=\"px-4 py-2 text-center text-gray-500\">å–æ¶ˆ</th>\n                </tr>\n              </thead>\n              <tbody className=\"divide-y divide-gray-100\">\n                {history.map((h) => (\n                  <tr key={h.id}>\n                    <td className=\"px-4 py-3 text-gray-600\">\n                      {new Date(h.created_at).toLocaleString('ja-JP', {\n                        month: 'numeric',\n                        day: 'numeric',\n                        hour: '2-digit',\n                        minute: '2-digit',\n                      })}\n                    </td>\n                    <td className=\"px-4 py-3\">\n                      {getTypeLabel(h.movement_type)}\n                    </td>\n                    <td\n                      className={`px-4 py-3 text-right font-bold ${h.quantity_change > 0 ? 'text-blue-600' : 'text-red-600'}`}\n                    >\n                      {h.quantity_change > 0 ? '+' : ''}\n                      {h.quantity_change}\n                    </td>\n                    <td className=\"px-4 py-3 text-gray-500 text-xs\">\n                      {h.reason && <div>{h.reason}</div>}\n                      {h.defect_reason && (\n                        <div className=\"text-red-500\">{h.defect_reason}</div>\n                      )}\n                      {h.due_date && <div>ç´æœŸ: {h.due_date}</div>}\n                    </td>\n                    <td className=\"px-4 py-3 text-center\">\n                      <button\n                        onClick={() => handleDelete(h.id, h.movement_type)}\n                        className=\"text-gray-400 hover:text-red-600\"\n                        title=\"ã“ã®æ“ä½œã‚’å–ã‚Šæ¶ˆã™\"\n                      >\n                        ğŸ—‘ï¸\n                      </button>\n                    </td>\n                  </tr>\n                ))}\n              </tbody>\n            </table>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hibino\\otsudenki-portal\\src\\app\\(main)\\inventory\\operation-panel.tsx","messages":[{"ruleId":null,"message":"Unused eslint-disable directive (no problems were reported from 'react-hooks/set-state-in-effect').","line":778,"column":3,"severity":1,"nodeType":null,"fix":{"range":[26142,26201],"text":" "}},{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\nC:\\Users\\hibino\\otsudenki-portal\\src\\app\\(main)\\inventory\\operation-panel.tsx:780:5\n  778 |   // eslint-disable-next-line react-hooks/set-state-in-effect\n  779 |   useEffect(() => {\n> 780 |     loadHistory();\n      |     ^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  781 |   }, [loadHistory]);\n  782 |\n  783 |   const toggleSelect = (id: string) => {","line":780,"column":5,"nodeType":null,"endLine":780,"endColumn":16}],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":467,"column":44,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":467,"endColumn":47,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[15307,15310],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[15307,15310],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":471,"column":42,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":471,"endColumn":45,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[15569,15572],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[15569,15572],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":766,"column":42,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":766,"endColumn":45,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[25742,25745],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[25742,25745],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":1,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":1,"source":"'use client';\n\nimport { useState, useEffect, useCallback } from 'react';\nimport {\n  registerReceiving,\n  registerProduction,\n  registerShipment,\n  registerDefectiveProcessing,\n  getGlobalHistory,\n  bulkDeleteMovements,\n} from './actions';\nimport {\n  getRawStockProductsByPartner,\n  getDefectiveProductsByPartner,\n  getRecentShipments,\n  getProductsByPartner,\n} from './actions';\n\n// å‹å®šç¾©\ntype RawProduct = Awaited<\n  ReturnType<typeof getRawStockProductsByPartner>\n>[number];\ntype DefectiveProduct = Awaited<\n  ReturnType<typeof getDefectiveProductsByPartner>\n>[number];\n\nexport default function OperationPanel({\n  partnerId,\n  rawProducts,\n  defectiveProducts,\n}: {\n  partnerId: string;\n  rawProducts: RawProduct[];\n  defectiveProducts: DefectiveProduct[];\n}) {\n  const [activeTab, setActiveTab] = useState('receiving');\n\n  // ã‚¿ãƒ–åˆ‡ã‚Šæ›¿ãˆã‚¹ã‚¿ã‚¤ãƒ«\n  const tabClass = (id: string) =>\n    `px-4 py-2 text-sm font-bold rounded-t-lg transition-colors ${activeTab === id ? 'bg-white text-blue-600 border-t-2 border-blue-600 shadow-sm' : 'bg-gray-100 text-gray-500 hover:bg-gray-200'}`;\n\n  return (\n    <div className=\"space-y-6\">\n      {/* ã‚¿ãƒ–ãƒ˜ãƒƒãƒ€ãƒ¼ */}\n      <div className=\"flex border-b border-gray-200 overflow-x-auto\">\n        <button\n          onClick={() => setActiveTab('receiving')}\n          className={tabClass('receiving')}\n        >\n          1. éƒ¨æå—å…¥\n        </button>\n        <button\n          onClick={() => setActiveTab('production')}\n          className={tabClass('production')}\n        >\n          2. åŠ å·¥å®Ÿç¸¾\n        </button>\n        <button\n          onClick={() => setActiveTab('shipment')}\n          className={tabClass('shipment')}\n        >\n          3. å‡ºè·ç™»éŒ²\n        </button>\n        <button\n          onClick={() => setActiveTab('defective')}\n          className={tabClass('defective')}\n        >\n          4. ä¸è‰¯å“å‡¦ç†\n        </button>\n        <button\n          onClick={() => setActiveTab('history')}\n          className={tabClass('history')}\n        >\n          5. å±¥æ­´ãƒ»å–æ¶ˆ\n        </button>\n      </div>\n\n      <div className=\"bg-white p-6 rounded-b-lg border border-gray-200 shadow-sm min-h-[400px]\">\n        {activeTab === 'receiving' && <ReceivingTab products={rawProducts} />}\n        {activeTab === 'production' && <ProductionTab products={rawProducts} />}\n        {activeTab === 'shipment' && <ShipmentTab partnerId={partnerId} />}\n        {activeTab === 'defective' && (\n          <DefectiveTab products={defectiveProducts} />\n        )}\n        {activeTab === 'history' && <HistoryTable />}\n      </div>\n    </div>\n  );\n}\n\n// ============================================================================\n// 1. å—å…¥ç™»éŒ²ã‚¿ãƒ–\n// ============================================================================\nfunction ReceivingTab({ products }: { products: RawProduct[] }) {\n  const [inputs, setInputs] = useState<\n    Record<number, { qty: string; date: string }>\n  >({});\n  const [isSubmitting, setIsSubmitting] = useState(false);\n\n  const handleChange = (id: number, field: 'qty' | 'date', value: string) => {\n    setInputs((prev) => {\n      // â˜…ä¿®æ­£: äºŒé‡å®šç¾©ã‚¨ãƒ©ãƒ¼å›é¿ã®ãŸã‚ã€åˆæœŸå€¤ã‚’å¤–ã«å‡ºã™\n      const current = prev[id] || { qty: '', date: '' };\n      return { ...prev, [id]: { ...current, [field]: value } };\n    });\n  };\n\n  const handleRegister = async (p: RawProduct) => {\n    const input = inputs[p.id];\n    if (!input?.qty) return alert('æ•°é‡ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„');\n    if (confirm(`${p.name} ã‚’ ${input.qty}å€‹ å—å…¥ç™»éŒ²ã—ã¾ã™ã‹ï¼Ÿ`)) {\n      setIsSubmitting(true);\n      const res = await registerReceiving({\n        productId: p.id,\n        quantity: Number(input.qty),\n        dueDate: input.date || '', // ç´æœŸã¯ä»»æ„\n      });\n      alert(res.message);\n      if (res.success)\n        setInputs((prev) => ({ ...prev, [p.id]: { qty: '', date: '' } }));\n      setIsSubmitting(false);\n    }\n  };\n\n  return (\n    <div className=\"space-y-4\">\n      <h3 className=\"font-bold text-gray-700 border-l-4 border-yellow-400 pl-3\">\n        ç”Ÿåœ°ãƒ»éƒ¨æã®å—å…¥\n      </h3>\n      {products.length === 0 ? (\n        <p className=\"text-gray-400 py-4\">å¯¾è±¡è£½å“ãŒã‚ã‚Šã¾ã›ã‚“</p>\n      ) : (\n        <div className=\"grid gap-4 md:grid-cols-2 lg:grid-cols-3\">\n          {products.map((p) => (\n            <div\n              key={p.id}\n              className=\"border p-4 rounded bg-gray-50 hover:bg-white transition-colors\"\n            >\n              <div className=\"font-bold text-lg mb-1\">{p.name}</div>\n              <div className=\"text-xs text-gray-500 mb-2\">\n                {p.product_code} {p.color}\n              </div>\n              <div className=\"flex justify-between text-sm mb-3\">\n                <span>\n                  ç¾åœ¨åº«:{' '}\n                  <span className=\"font-bold\">\n                    {p.stock_raw.toLocaleString()}\n                  </span>\n                </span>\n              </div>\n              <div className=\"space-y-2\">\n                <input\n                  type=\"number\"\n                  placeholder=\"å—å…¥æ•°é‡\"\n                  className=\"w-full border p-2 rounded\"\n                  value={inputs[p.id]?.qty || ''}\n                  onChange={(e) => handleChange(p.id, 'qty', e.target.value)}\n                />\n                <input\n                  type=\"date\"\n                  className=\"w-full border p-2 rounded text-sm text-gray-500\"\n                  value={inputs[p.id]?.date || ''}\n                  onChange={(e) => handleChange(p.id, 'date', e.target.value)}\n                />\n                <button\n                  onClick={() => handleRegister(p)}\n                  disabled={isSubmitting}\n                  className=\"w-full bg-yellow-500 text-white font-bold py-2 rounded hover:bg-yellow-600 disabled:opacity-50\"\n                >\n                  å—å…¥ç™»éŒ²\n                </button>\n              </div>\n              {/* ç›´è¿‘ã®å…¥è·å±¥æ­´ã‚’è¡¨ç¤º */}\n              {p.arrivals && p.arrivals.length > 0 && (\n                <div className=\"mt-3 pt-3 border-t border-gray-200\">\n                  <p className=\"text-xs font-bold text-gray-400 mb-1\">\n                    ç›´è¿‘ã®å…¥è·\n                  </p>\n                  <ul className=\"text-xs text-gray-600 space-y-1\">\n                    {p.arrivals.map((log, i) => (\n                      <li key={i}>ãƒ»{log.label}</li>\n                    ))}\n                  </ul>\n                </div>\n              )}\n            </div>\n          ))}\n        </div>\n      )}\n    </div>\n  );\n}\n\n// ============================================================================\n// 2. åŠ å·¥å®Ÿç¸¾ã‚¿ãƒ–\n// ============================================================================\ntype ProdInput = {\n  finished: string;\n  rawUsed: string;\n  defective: string;\n  defects: Record<string, number>;\n  sourceDate: string;\n};\n\nfunction ProductionTab({ products }: { products: RawProduct[] }) {\n  const [inputs, setInputs] = useState<Record<number, ProdInput>>({});\n  const [isSubmitting, setIsSubmitting] = useState(false);\n\n  const handleChange = (id: number, field: keyof ProdInput, value: string) => {\n    setInputs((prev) => {\n      // â˜…ä¿®æ­£: åˆæœŸå€¤ã‚’å¤–ã«å‡ºã—ã¦ã‚¹ãƒƒã‚­ãƒªã•ã›ã‚‹\n      const current = prev[id] || {\n        finished: '',\n        rawUsed: '',\n        defective: '',\n        defects: {},\n        sourceDate: '',\n      };\n      return { ...prev, [id]: { ...current, [field]: value } };\n    });\n  };\n\n  const handleDefectsSave = (\n    productId: number,\n    newDefects: Record<string, number>\n  ) => {\n    setInputs((prev) => {\n      const current = prev[productId] || {\n        finished: '',\n        rawUsed: '',\n        defective: '',\n        defects: {},\n        sourceDate: '',\n      };\n      // ä¸è‰¯æ•°ã®åˆè¨ˆã‚’è¨ˆç®—ã—ã¦ defective ã«ã‚»ãƒƒãƒˆ\n      const totalDefective = Object.values(newDefects).reduce(\n        (a, b) => a + b,\n        0\n      );\n      return {\n        ...prev,\n        [productId]: {\n          ...current,\n          defects: newDefects,\n          defective: totalDefective > 0 ? totalDefective.toString() : '',\n        },\n      };\n    });\n  };\n\n  const handleRegister = async (p: RawProduct) => {\n    const inp = inputs[p.id] || {};\n    const finished = Number(inp.finished || 0);\n    const defective = Number(inp.defective || 0);\n    const rawUsed = Number(inp.rawUsed) || finished + defective; // å…¥åŠ›ãªã‘ã‚Œã°è‡ªå‹•è¨ˆç®—\n\n    if (finished + defective === 0)\n      return alert('å®Œæˆæ•°ã¾ãŸã¯ä¸è‰¯æ•°ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„');\n\n    // ä¸è‰¯ç†ç”±ã®ãƒ†ã‚­ã‚¹ãƒˆåŒ–\n    let defectReason = '';\n    if (inp.defects && Object.keys(inp.defects).length > 0) {\n      defectReason = Object.entries(inp.defects)\n        .map(([reason, count]) => `${reason}:${count}`)\n        .join(', ');\n    }\n\n    if (\n      confirm(\n        `ä»¥ä¸‹ã®å†…å®¹ã§ç™»éŒ²ã—ã¾ã™ã‹ï¼Ÿ\\n\\nãƒ»è£½å“: ${p.name}\\nãƒ»è‰¯å“å®Œæˆ: ${finished}å€‹\\nãƒ»ä¸è‰¯ç™ºç”Ÿ: ${defective}å€‹\\nãƒ»ç”Ÿåœ°æ¶ˆè²»: ${rawUsed}å€‹\\n${inp.sourceDate ? `ãƒ»å…¥è·æ—¥æŒ‡å®š: ${inp.sourceDate}` : ''}`\n      )\n    ) {\n      setIsSubmitting(true);\n      const res = await registerProduction({\n        productId: p.id,\n        rawUsed,\n        finished,\n        defective,\n        defectReason,\n        sourceDate: inp.sourceDate,\n      });\n      alert(res.message);\n      if (res.success)\n        setInputs((prev) => ({\n          ...prev,\n          [p.id]: {\n            finished: '',\n            rawUsed: '',\n            defective: '',\n            defects: {},\n            sourceDate: '',\n          },\n        }));\n      setIsSubmitting(false);\n    }\n  };\n\n  return (\n    <div className=\"space-y-4\">\n      <h3 className=\"font-bold text-gray-700 border-l-4 border-blue-500 pl-3\">\n        åŠ å·¥å®Ÿç¸¾ã®ç™»éŒ²\n      </h3>\n      {products.length === 0 ? (\n        <p className=\"text-gray-400 py-4\">å¯¾è±¡è£½å“ãŒã‚ã‚Šã¾ã›ã‚“</p>\n      ) : (\n        <div className=\"grid gap-4 md:grid-cols-2 lg:grid-cols-3\">\n          {products.map((p) => {\n            const inp = inputs[p.id] || {};\n            return (\n              <div\n                key={p.id}\n                className=\"border p-4 rounded bg-gray-50 hover:bg-white transition-colors relative\"\n              >\n                <div className=\"font-bold text-lg mb-1\">{p.name}</div>\n                <div className=\"text-xs text-gray-500 mb-3\">\n                  {p.product_code} {p.color}\n                </div>\n\n                {/* å…¥è·æ—¥é¸æŠãƒ—ãƒ«ãƒ€ã‚¦ãƒ³ */}\n                {p.arrivals && p.arrivals.length > 0 && (\n                  <div className=\"mb-3\">\n                    <select\n                      className=\"w-full text-xs border rounded p-1 bg-white text-gray-700\"\n                      value={inp.sourceDate || ''}\n                      onChange={(e) =>\n                        handleChange(p.id, 'sourceDate', e.target.value)\n                      }\n                    >\n                      <option value=\"\">ã„ã¤ã®å…¥è·åˆ†ã‚’ä½¿ç”¨ï¼Ÿ (æŒ‡å®šãªã—)</option>\n                      {p.arrivals.map((a, idx) => (\n                        <option key={idx} value={a.value}>\n                          {a.label}\n                        </option>\n                      ))}\n                    </select>\n                  </div>\n                )}\n\n                <div className=\"space-y-3\">\n                  <div className=\"flex items-center gap-2\">\n                    <span className=\"text-sm font-bold w-12 text-blue-600\">\n                      å®Œæˆ\n                    </span>\n                    <input\n                      type=\"number\"\n                      placeholder=\"0\"\n                      className=\"flex-1 border p-2 rounded font-bold\"\n                      value={inp.finished || ''}\n                      onChange={(e) =>\n                        handleChange(p.id, 'finished', e.target.value)\n                      }\n                    />\n                  </div>\n\n                  {/* ä¸è‰¯å…¥åŠ›ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ */}\n                  <DefectInputRow\n                    productId={p.id}\n                    currentDefects={inp.defects || {}}\n                    onSave={handleDefectsSave}\n                  />\n\n                  <div className=\"flex items-center gap-2 pt-2 border-t border-gray-200\">\n                    <span className=\"text-xs font-bold w-12 text-gray-500\">\n                      æ¶ˆè²»\n                    </span>\n                    <input\n                      type=\"number\"\n                      placeholder=\"è‡ªå‹•\"\n                      className=\"flex-1 border p-1 rounded text-sm bg-gray-100\"\n                      value={inp.rawUsed || ''}\n                      onChange={(e) =>\n                        handleChange(p.id, 'rawUsed', e.target.value)\n                      }\n                    />\n                  </div>\n\n                  <button\n                    onClick={() => handleRegister(p)}\n                    disabled={isSubmitting}\n                    className=\"w-full bg-blue-600 text-white font-bold py-2 rounded hover:bg-blue-700 disabled:opacity-50 mt-2\"\n                  >\n                    å®Ÿç¸¾ç™»éŒ²\n                  </button>\n                </div>\n              </div>\n            );\n          })}\n        </div>\n      )}\n    </div>\n  );\n}\n\n// ã‚µãƒ–ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ: ä¸è‰¯å…¥åŠ›è¡Œ (ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—å¯¾å¿œ)\nfunction DefectInputRow({\n  productId,\n  currentDefects,\n  onSave,\n}: {\n  productId: number;\n  currentDefects: Record<string, number>;\n  onSave: (pid: number, defects: Record<string, number>) => void;\n}) {\n  const [isOpen, setIsOpen] = useState(false);\n  const total = Object.values(currentDefects).reduce((a, b) => a + b, 0);\n\n  // ä¸è‰¯ç†ç”±ãƒã‚¹ã‚¿\n  const reasons = ['æ‰“ç—•', 'å¡—è£…ä¸è‰¯', 'ãƒ¡ãƒƒã‚­ä¸è‰¯', 'å¯¸æ³•NG', 'ãã®ä»–'];\n\n  const handleReasonChange = (reason: string, val: string) => {\n    const num = Number(val);\n    const next = { ...currentDefects };\n    if (num > 0) next[reason] = num;\n    else delete next[reason];\n    onSave(productId, next);\n  };\n\n  return (\n    <div className=\"relative\">\n      <div className=\"flex items-center gap-2\">\n        <span className=\"text-sm font-bold w-12 text-red-500\">ä¸è‰¯</span>\n        <div\n          onClick={() => setIsOpen(!isOpen)}\n          className=\"flex-1 border p-2 rounded bg-red-50 text-red-600 cursor-pointer flex justify-between items-center hover:bg-red-100\"\n        >\n          <span className=\"font-bold\">{total > 0 ? total : ''}</span>\n          <span className=\"text-xs\">â–¼ è©³ç´°</span>\n        </div>\n      </div>\n\n      {isOpen && (\n        <div className=\"absolute top-full left-0 z-10 w-64 bg-white border border-gray-300 shadow-xl rounded-lg p-3 mt-1\">\n          <div className=\"flex justify-between items-center mb-2 pb-2 border-b\">\n            <span className=\"font-bold text-sm text-gray-700\">ä¸è‰¯å†…è¨³</span>\n            <button\n              onClick={() => setIsOpen(false)}\n              className=\"text-gray-400 hover:text-gray-600\"\n            >\n              âœ•\n            </button>\n          </div>\n          <div className=\"space-y-2\">\n            {reasons.map((r) => (\n              <div key={r} className=\"flex items-center justify-between\">\n                <span className=\"text-sm text-gray-600\">{r}</span>\n                <input\n                  type=\"number\"\n                  className=\"w-16 border rounded p-1 text-right text-sm\"\n                  placeholder=\"0\"\n                  value={currentDefects[r] || ''}\n                  onChange={(e) => handleReasonChange(r, e.target.value)}\n                />\n              </div>\n            ))}\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n\n// ============================================================================\n// 3. å‡ºè·ç™»éŒ²ã‚¿ãƒ–\n// ============================================================================\nfunction ShipmentTab({ partnerId }: { partnerId: string }) {\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  const [products, setProducts] = useState<any[]>([]);\n  const [inputs, setInputs] = useState<Record<number, string>>({});\n  const [date, setDate] = useState(new Date().toISOString().split('T')[0]);\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  const [history, setHistory] = useState<any[]>([]);\n  const [isSubmitting, setIsSubmitting] = useState(false);\n\n  // åˆæœŸãƒ­ãƒ¼ãƒ‰\n  useEffect(() => {\n    const load = async () => {\n      const [pData, hData] = await Promise.all([\n        getProductsByPartner(partnerId),\n        getRecentShipments(partnerId),\n      ]);\n      setProducts(pData || []);\n      setHistory(hData || []);\n    };\n    load();\n  }, [partnerId]);\n\n  const handleChange = (id: number, val: string) => {\n    setInputs((prev) => ({ ...prev, [id]: val }));\n  };\n\n  const handleRegister = async () => {\n    const items = Object.entries(inputs)\n      .map(([pid, qty]) => ({ productId: Number(pid), quantity: Number(qty) }))\n      .filter((i) => i.quantity > 0);\n\n    if (items.length === 0) return alert('å‡ºè·æ•°ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„');\n\n    if (confirm(`${items.length}å“ç›®ã®å‡ºè·ã‚’ç™»éŒ²ã—ã¾ã™ã‹ï¼Ÿ\\nå‡ºè·æ—¥: ${date}`)) {\n      setIsSubmitting(true);\n      const res = await registerShipment({\n        partnerId,\n        shipmentDate: date,\n        items,\n      });\n\n      if (res.success) {\n        alert(res.message);\n        setInputs({});\n        // å±¥æ­´æ›´æ–°\n        const hData = await getRecentShipments(partnerId);\n        setHistory(hData || []);\n      } else {\n        alert(res.message);\n      }\n      setIsSubmitting(false);\n    }\n  };\n\n  return (\n    <div className=\"flex gap-6\">\n      <div className=\"flex-1 space-y-4\">\n        <h3 className=\"font-bold text-gray-700 border-l-4 border-green-500 pl-3\">\n          å‡ºè·ãƒ‡ãƒ¼ã‚¿ã®ç™»éŒ²\n        </h3>\n\n        <div className=\"bg-gray-50 p-4 rounded flex items-center gap-4\">\n          <label className=\"font-bold text-gray-700\">å‡ºè·æ—¥:</label>\n          <input\n            type=\"date\"\n            value={date}\n            onChange={(e) => setDate(e.target.value)}\n            className=\"border p-2 rounded\"\n          />\n        </div>\n\n        {products.length === 0 ? (\n          <p className=\"text-gray-400\">ç™»éŒ²ã•ã‚ŒãŸè£½å“ãŒã‚ã‚Šã¾ã›ã‚“</p>\n        ) : (\n          <div className=\"bg-white border rounded shadow-sm overflow-hidden\">\n            <table className=\"min-w-full divide-y divide-gray-200\">\n              <thead className=\"bg-gray-100\">\n                <tr>\n                  <th className=\"px-4 py-2 text-left text-xs font-bold text-gray-500\">\n                    è£½å“ã‚³ãƒ¼ãƒ‰\n                  </th>\n                  <th className=\"px-4 py-2 text-left text-xs font-bold text-gray-500\">\n                    è£½å“å\n                  </th>\n                  <th className=\"px-4 py-2 text-left text-xs font-bold text-gray-500\">\n                    è‰²\n                  </th>\n                  <th className=\"px-4 py-2 text-right text-xs font-bold text-gray-500 w-32\">\n                    å‡ºè·æ•°é‡\n                  </th>\n                </tr>\n              </thead>\n              <tbody className=\"divide-y divide-gray-200\">\n                {products.map((p) => (\n                  <tr key={p.id} className={inputs[p.id] ? 'bg-green-50' : ''}>\n                    <td className=\"px-4 py-3 text-sm font-mono text-gray-600\">\n                      {p.product_code}\n                    </td>\n                    <td className=\"px-4 py-3 text-sm font-bold text-gray-800\">\n                      {p.name}\n                    </td>\n                    <td className=\"px-4 py-3 text-sm text-gray-500\">\n                      {p.color}\n                    </td>\n                    <td className=\"px-4 py-2\">\n                      <input\n                        type=\"number\"\n                        className=\"w-full border p-1 rounded text-right font-bold focus:ring-2 focus:ring-green-500 focus:outline-none\"\n                        placeholder=\"0\"\n                        value={inputs[p.id] || ''}\n                        onChange={(e) => handleChange(p.id, e.target.value)}\n                      />\n                    </td>\n                  </tr>\n                ))}\n              </tbody>\n            </table>\n          </div>\n        )}\n\n        <div className=\"pt-4 text-right\">\n          <button\n            onClick={handleRegister}\n            disabled={isSubmitting}\n            className=\"bg-green-600 text-white px-8 py-3 rounded-lg font-bold shadow hover:bg-green-700 disabled:opacity-50\"\n          >\n            å‡ºè·ç™»éŒ²ã™ã‚‹\n          </button>\n        </div>\n      </div>\n\n      {/* å³å´ã‚µã‚¤ãƒ‰: ç›´è¿‘ã®å‡ºè·å±¥æ­´ãƒªã‚¹ãƒˆ */}\n      <div className=\"w-64 flex-shrink-0 border-l pl-6 hidden lg:block\">\n        <h4 className=\"font-bold text-gray-500 mb-4 text-sm\">\n          æœ€è¿‘ã®å‡ºè·ãƒªã‚¹ãƒˆ\n        </h4>\n        <div className=\"space-y-3\">\n          {history.length === 0 && (\n            <p className=\"text-xs text-gray-400\">å±¥æ­´ãªã—</p>\n          )}\n          {history.map((h) => (\n            <div key={h.id} className=\"border p-3 rounded bg-gray-50 text-sm\">\n              <div className=\"flex justify-between text-gray-500 text-xs mb-1\">\n                <span>{new Date(h.shipment_date).toLocaleDateString()}</span>\n                <a\n                  href={`/shipments/${h.id}/print`}\n                  target=\"_blank\"\n                  className=\"text-blue-600 hover:underline\"\n                >\n                  å°åˆ·\n                </a>\n              </div>\n              <div className=\"font-bold text-gray-800\">\n                Â¥{h.total_amount.toLocaleString()}\n              </div>\n            </div>\n          ))}\n        </div>\n      </div>\n    </div>\n  );\n}\n\n// ============================================================================\n// 4. ä¸è‰¯å“å‡¦ç†ã‚¿ãƒ–\n// ============================================================================\nfunction DefectiveTab({ products }: { products: DefectiveProduct[] }) {\n  const [inputs, setInputs] = useState<\n    Record<number, { rework: string; return: string }>\n  >({});\n  const [isSubmitting, setIsSubmitting] = useState(false);\n\n  const handleChange = (\n    id: number,\n    field: 'rework' | 'return',\n    value: string\n  ) => {\n    setInputs((prev) => {\n      // â˜…ä¿®æ­£: åˆæœŸå€¤ã‚’å¤–ã«å‡ºã™\n      const current = prev[id] || { rework: '', return: '' };\n      return { ...prev, [id]: { ...current, [field]: value } };\n    });\n  };\n\n  const handleRegister = async (p: DefectiveProduct) => {\n    const inp = inputs[p.id] || { rework: '0', return: '0' };\n    const rework = Number(inp.rework || 0);\n    const ret = Number(inp.return || 0);\n\n    if (rework + ret === 0) return alert('æ•°é‡ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„');\n    if (\n      confirm(\n        `å‡¦ç†ã‚’å®Ÿè¡Œã—ã¾ã™ã‹ï¼Ÿ\\n\\nãƒ»æ‰‹ç›´ã—è‰¯å“åŒ–: ${rework}å€‹\\nãƒ»ä¸è‰¯å“è¿”å´: ${ret}å€‹`\n      )\n    ) {\n      setIsSubmitting(true);\n      const res = await registerDefectiveProcessing({\n        productId: p.id,\n        reworkQty: rework,\n        returnQty: ret,\n      });\n      alert(res.message);\n      if (res.success)\n        setInputs((prev) => ({ ...prev, [p.id]: { rework: '', return: '' } }));\n      setIsSubmitting(false);\n    }\n  };\n\n  return (\n    <div className=\"space-y-4\">\n      <h3 className=\"font-bold text-gray-700 border-l-4 border-red-500 pl-3\">\n        ä¸è‰¯åœ¨åº«ã®å‡¦ç†\n      </h3>\n      <p className=\"text-sm text-gray-500\">\n        ç™ºç”Ÿã—ãŸä¸è‰¯å“ã«ã¤ã„ã¦ã€ã€Œæ‰‹ç›´ã—ã—ã¦è‰¯å“ã«ã™ã‚‹ã€ã‹ã€Œå®¢å…ˆã¸è¿”å´(å»ƒæ£„)ã™ã‚‹ã€ã‹ã‚’ç™»éŒ²ã—ã¾ã™ã€‚\n      </p>\n\n      {products.length === 0 ? (\n        <div className=\"p-8 text-center bg-gray-50 rounded text-gray-400\">\n          ç¾åœ¨ã€ä¸è‰¯åœ¨åº«ã¯ã‚ã‚Šã¾ã›ã‚“\n        </div>\n      ) : (\n        <div className=\"grid gap-4 md:grid-cols-2 lg:grid-cols-3\">\n          {products.map((p) => (\n            <div\n              key={p.id}\n              className=\"border p-4 rounded bg-red-50 border-red-100\"\n            >\n              <div className=\"font-bold text-lg text-gray-800\">{p.name}</div>\n              <div className=\"text-xs text-gray-500 mb-2\">{p.product_code}</div>\n              <div className=\"mb-4 text-center bg-white rounded p-2 border border-red-200\">\n                <span className=\"text-xs text-gray-500 block\">ä¸è‰¯åœ¨åº«</span>\n                <span className=\"text-xl font-bold text-red-600\">\n                  {p.stock_defective}\n                </span>\n              </div>\n\n              {/* ç›´è¿‘ã®ä¸è‰¯ç†ç”± */}\n              {p.recent_defects.length > 0 && (\n                <div className=\"mb-3 text-xs bg-white/50 p-2 rounded\">\n                  <p className=\"font-bold text-gray-500 mb-1\">\n                    æœ€è¿‘ã®ä¸è‰¯ç†ç”±:\n                  </p>\n                  {p.recent_defects.map((d, i) => (\n                    <div key={i} className=\"text-gray-600\">\n                      ãƒ»{d.reason} ({d.date})\n                    </div>\n                  ))}\n                </div>\n              )}\n\n              <div className=\"space-y-3\">\n                <div className=\"flex items-center gap-2\">\n                  <span className=\"text-xs font-bold w-16 text-blue-600\">\n                    æ‰‹ç›´ã—OK\n                  </span>\n                  <input\n                    type=\"number\"\n                    placeholder=\"è‰¯å“ã¸\"\n                    className=\"flex-1 border p-1 rounded\"\n                    value={inputs[p.id]?.rework || ''}\n                    onChange={(e) =>\n                      handleChange(p.id, 'rework', e.target.value)\n                    }\n                  />\n                </div>\n                <div className=\"flex items-center gap-2\">\n                  <span className=\"text-xs font-bold w-16 text-gray-500\">\n                    è¿”å´/å»ƒæ£„\n                  </span>\n                  <input\n                    type=\"number\"\n                    placeholder=\"åœ¨åº«æ¸›\"\n                    className=\"flex-1 border p-1 rounded\"\n                    value={inputs[p.id]?.return || ''}\n                    onChange={(e) =>\n                      handleChange(p.id, 'return', e.target.value)\n                    }\n                  />\n                </div>\n                <button\n                  onClick={() => handleRegister(p)}\n                  disabled={isSubmitting}\n                  className=\"w-full bg-red-500 text-white font-bold py-2 rounded hover:bg-red-600 disabled:opacity-50 text-sm\"\n                >\n                  å‡¦ç†ç™»éŒ²\n                </button>\n              </div>\n            </div>\n          ))}\n        </div>\n      )}\n    </div>\n  );\n}\n\n// ============================================================================\n// 5. å±¥æ­´ãƒ»ä¸€æ‹¬å‰Šé™¤ãƒ†ãƒ¼ãƒ–ãƒ«\n// ============================================================================\nfunction HistoryTable() {\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  const [history, setHistory] = useState<any[]>([]);\n  const [selectedIds, setSelectedIds] = useState<Set<string>>(new Set());\n  const [isLoading, setIsLoading] = useState(false);\n  const [isDeleting, setIsDeleting] = useState(false);\n\n  const loadHistory = useCallback(async () => {\n    setIsLoading(true);\n    const data = await getGlobalHistory();\n    setHistory(data);\n    setSelectedIds(new Set());\n    setIsLoading(false);\n  }, []);\n  // eslint-disable-next-line react-hooks/set-state-in-effect\n  useEffect(() => {\n    loadHistory();\n  }, [loadHistory]);\n\n  const toggleSelect = (id: string) => {\n    const newSet = new Set(selectedIds);\n    if (newSet.has(id)) newSet.delete(id);\n    else newSet.add(id);\n    setSelectedIds(newSet);\n  };\n  const toggleAll = () => {\n    if (selectedIds.size === history.length) setSelectedIds(new Set());\n    else setSelectedIds(new Set(history.map((h) => h.id)));\n  };\n\n  const handleUndo = async () => {\n    if (selectedIds.size === 0) return;\n    if (\n      !confirm(\n        `é¸æŠã—ãŸ ${selectedIds.size} ä»¶ã®æ“ä½œã‚’ã€Œå–ã‚Šæ¶ˆã—ã€ã¾ã™ã‹ï¼Ÿ\\n\\nã€æ³¨æ„ã€‘\\nåœ¨åº«æ•°ãŒæ“ä½œå‰ã®çŠ¶æ…‹ã«æˆ»ã‚Šã¾ã™ã€‚\\n(ä¾‹: å—å…¥ã‚’å–ã‚Šæ¶ˆã™ã¨åœ¨åº«ãŒæ¸›ã‚Šã¾ã™)`\n      )\n    )\n      return;\n    setIsDeleting(true);\n    const res = await bulkDeleteMovements(Array.from(selectedIds));\n    setIsDeleting(false);\n    alert(res.message);\n    loadHistory();\n  };\n\n  const getTypeLabel = (type: string) => {\n    switch (type) {\n      case 'receiving':\n        return (\n          <span className=\"bg-yellow-100 text-yellow-800 px-2 py-0.5 rounded text-xs font-bold\">\n            å—å…¥\n          </span>\n        );\n      case 'production_raw':\n        return (\n          <span className=\"bg-gray-100 text-gray-800 px-2 py-0.5 rounded text-xs\">\n            æ¶ˆè²»\n          </span>\n        );\n      case 'production_finished':\n        return (\n          <span className=\"bg-blue-100 text-blue-800 px-2 py-0.5 rounded text-xs font-bold\">\n            å®Œæˆ\n          </span>\n        );\n      case 'production_defective':\n        return (\n          <span className=\"bg-red-100 text-red-800 px-2 py-0.5 rounded text-xs\">\n            ä¸è‰¯\n          </span>\n        );\n      case 'shipping':\n        return (\n          <span className=\"bg-green-100 text-green-800 px-2 py-0.5 rounded text-xs font-bold\">\n            å‡ºè·\n          </span>\n        );\n      case 'repair':\n        return (\n          <span className=\"bg-blue-50 text-blue-600 px-2 py-0.5 rounded text-xs border border-blue-200\">\n            æ‰‹ç›´ã—\n          </span>\n        );\n      case 'return_defective':\n        return (\n          <span className=\"bg-gray-100 text-gray-500 px-2 py-0.5 rounded text-xs border border-gray-300\">\n            è¿”å´\n          </span>\n        );\n      case 'shipping_cancel':\n        return (\n          <span className=\"bg-gray-600 text-white px-2 py-0.5 rounded text-xs font-bold\">\n            å‡ºè·å–æ¶ˆ\n          </span>\n        );\n      default:\n        return type;\n    }\n  };\n\n  return (\n    <div className=\"space-y-4\">\n      <div className=\"flex justify-between items-center bg-gray-50 p-4 rounded-md border border-gray-200\">\n        <div>\n          <h3 className=\"font-bold text-gray-800\">æ“ä½œå±¥æ­´ã®ç®¡ç†</h3>\n          <p className=\"text-xs text-gray-500 mt-1\">\n            æ“ä½œã‚’é¸ã‚“ã§ã€Œä¸€æ‹¬å–ã‚Šæ¶ˆã—ã€ãƒœã‚¿ãƒ³ã‚’æŠ¼ã™ã¨ã€åœ¨åº«ãŒå…ƒã®çŠ¶æ…‹ã«æˆ»ã‚Šã¾ã™ã€‚\n          </p>\n        </div>\n        <div className=\"flex gap-3 items-center\">\n          <button\n            onClick={loadHistory}\n            className=\"text-sm text-gray-500 hover:text-indigo-600 underline mr-2\"\n          >\n            å†èª­ã¿è¾¼ã¿\n          </button>\n          <button\n            onClick={handleUndo}\n            disabled={selectedIds.size === 0 || isDeleting}\n            className={`px-4 py-2 rounded-md font-bold text-white shadow-sm text-sm ${selectedIds.size > 0 ? 'bg-red-500 hover:bg-red-600' : 'bg-gray-300 cursor-not-allowed'}`}\n          >\n            ä¸€æ‹¬å–ã‚Šæ¶ˆã— (åœ¨åº«æˆ»ã™)\n          </button>\n        </div>\n      </div>\n\n      <div className=\"border border-gray-200 rounded-lg overflow-hidden bg-white shadow\">\n        {isLoading ? (\n          <div className=\"p-12 text-center text-gray-500\">èª­ã¿è¾¼ã¿ä¸­...</div>\n        ) : history.length === 0 ? (\n          <div className=\"p-12 text-center text-gray-500\">å±¥æ­´ãªã—</div>\n        ) : (\n          <div className=\"overflow-x-auto\">\n            <table className=\"min-w-full divide-y divide-gray-200\">\n              <thead className=\"bg-gray-50\">\n                <tr>\n                  <th className=\"px-4 py-3 w-12\">\n                    <input\n                      type=\"checkbox\"\n                      className=\"rounded border-gray-300\"\n                      checked={\n                        selectedIds.size === history.length &&\n                        history.length > 0\n                      }\n                      onChange={toggleAll}\n                    />\n                  </th>\n                  <th className=\"px-4 py-3 text-left text-xs font-medium text-gray-500\">\n                    æ—¥æ™‚\n                  </th>\n                  <th className=\"px-4 py-3 text-left text-xs font-medium text-gray-500\">\n                    ç¨®é¡\n                  </th>\n                  <th className=\"px-4 py-3 text-left text-xs font-medium text-gray-500\">\n                    å–å¼•å…ˆ / å“å\n                  </th>\n                  <th className=\"px-4 py-3 text-right text-xs font-medium text-gray-500\">\n                    æ•°é‡\n                  </th>\n                </tr>\n              </thead>\n              <tbody className=\"divide-y divide-gray-200 text-sm\">\n                {history.map((h) => {\n                  const isSelected = selectedIds.has(h.id);\n                  return (\n                    <tr\n                      key={h.id}\n                      className={isSelected ? 'bg-blue-50' : 'hover:bg-gray-50'}\n                    >\n                      <td className=\"px-4 py-3 text-center\">\n                        <input\n                          type=\"checkbox\"\n                          className=\"rounded border-gray-300\"\n                          checked={isSelected}\n                          onChange={() => toggleSelect(h.id)}\n                        />\n                      </td>\n                      <td className=\"px-4 py-3 text-xs text-gray-500\">\n                        {new Date(h.created_at).toLocaleString('ja-JP')}\n                      </td>\n                      <td className=\"px-4 py-3\">\n                        {getTypeLabel(h.movement_type)}\n                      </td>\n                      <td className=\"px-4 py-3\">\n                        <div className=\"text-xs text-gray-500\">\n                          {h.products?.partners?.name}\n                        </div>\n                        <div className=\"font-bold text-gray-700\">\n                          {h.products?.name}\n                        </div>\n                        {h.reason && (\n                          <div className=\"text-xs text-gray-400\">\n                            {h.reason}\n                          </div>\n                        )}\n                      </td>\n                      <td\n                        className={`px-4 py-3 text-right font-bold ${h.quantity_change > 0 ? 'text-blue-600' : 'text-red-600'}`}\n                      >\n                        {h.quantity_change > 0 ? '+' : ''}\n                        {h.quantity_change}\n                      </td>\n                    </tr>\n                  );\n                })}\n              </tbody>\n            </table>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hibino\\otsudenki-portal\\src\\app\\(main)\\inventory\\page.tsx","messages":[],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":22,"column":46,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":22,"endColumn":49,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[677,680],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[677,680],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":24,"column":50,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":24,"endColumn":53,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[803,806],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[803,806],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":26,"column":62,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":26,"endColumn":65,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[941,944],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[941,944],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hibino\\otsudenki-portal\\src\\app\\(main)\\invoices\\actions.ts","messages":[],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":43,"column":29,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":43,"endColumn":32,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1107,1110],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1107,1110],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hibino\\otsudenki-portal\\src\\app\\(main)\\invoices\\create\\[partnerId]\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":17,"column":46,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":17,"endColumn":49,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[577,580],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[577,580],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":30,"column":39,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":30,"endColumn":42,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1126,1129],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1126,1129],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":133,"column":57,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":133,"endColumn":60,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5037,5040],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5037,5040],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport { useState, useEffect } from 'react';\nimport { useRouter, useSearchParams, useParams } from 'next/navigation';\nimport { getUnbilledShipments, createSingleInvoice } from '../../actions';\nimport Link from 'next/link';\n\nexport default function ConfirmInvoicePage() {\n  const params = useParams();\n  const partnerId = params.partnerId as string;\n\n  const router = useRouter();\n  const searchParams = useSearchParams();\n  const start = searchParams.get('start') || '';\n  const end = searchParams.get('end') || '';\n\n  const [shipments, setShipments] = useState<any[]>([]);\n  const [partnerName, setPartnerName] = useState('');\n  const [isLoading, setIsLoading] = useState(true);\n  const [isSubmitting, setIsSubmitting] = useState(false);\n\n  useEffect(() => {\n    if (!partnerId || !start || !end) return;\n    const load = async () => {\n      setIsLoading(true);\n      const data = await getUnbilledShipments(partnerId, start, end);\n      setShipments(data || []);\n      if (data && data.length > 0) {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        const p = data[0].partners as any;\n        const name = Array.isArray(p) ? p[0]?.name : p?.name;\n        setPartnerName(name || '');\n      }\n      setIsLoading(false);\n    };\n    load();\n  }, [partnerId, start, end]);\n\n  const totalExclTax = shipments.reduce((sum, s) => sum + s.total_amount, 0);\n  const tax = Math.floor(totalExclTax * 0.1);\n  const totalAmount = totalExclTax + tax;\n\n  const handleConfirm = async () => {\n    if (!confirm(`${partnerName} å®›ã®è«‹æ±‚æ›¸ã‚’ç¢ºå®šã—ã¾ã™ã‹ï¼Ÿ`)) return;\n    setIsSubmitting(true);\n    const res = await createSingleInvoice(partnerId, start, end, totalExclTax);\n    if (res.success) {\n      alert(res.message);\n      router.push('/invoices');\n    } else {\n      alert(res.message);\n      setIsSubmitting(false);\n    }\n  };\n\n  if (isLoading)\n    return (\n      <div className=\"p-12 text-center text-gray-500\">\n        ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã¿ä¸­...\n      </div>\n    );\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex justify-between items-center border-b pb-4\">\n        <div>\n          <h1 className=\"text-2xl font-bold text-gray-800\">è«‹æ±‚å†…å®¹ã®ç¢ºèª</h1>\n          <p className=\"text-sm text-gray-500 mt-1\">\n            å–å¼•å…ˆ:{' '}\n            <span className=\"font-bold text-lg text-black\">{partnerName}</span>\n          </p>\n          <p className=\"text-sm text-gray-500\">\n            å¯¾è±¡æœŸé–“: {start} ï½ {end}\n          </p>\n        </div>\n        <div className=\"flex gap-4\">\n          <Link\n            href=\"/invoices/create\"\n            className=\"px-4 py-2 bg-gray-100 text-gray-600 rounded hover:bg-gray-200\"\n          >\n            ã‚­ãƒ£ãƒ³ã‚»ãƒ«\n          </Link>\n          {shipments.length > 0 && (\n            <button\n              onClick={handleConfirm}\n              disabled={isSubmitting}\n              className=\"px-6 py-2 bg-indigo-600 text-white font-bold rounded shadow hover:bg-indigo-500 disabled:opacity-50\"\n            >\n              ç¢ºå®šã—ã¦ç™ºè¡Œ\n            </button>\n          )}\n        </div>\n      </div>\n      {shipments.length === 0 ? (\n        <div className=\"p-8 text-center bg-gray-50 rounded text-gray-500\">\n          å¯¾è±¡ãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚Šã¾ã›ã‚“\n        </div>\n      ) : (\n        <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-8\">\n          <div className=\"lg:col-span-2 space-y-4\">\n            <h2 className=\"font-bold text-gray-700\">\n              ç´å“æ˜ç´° ({shipments.length}ä»¶)\n            </h2>\n            <div className=\"border border-gray-200 rounded-lg overflow-hidden\">\n              {shipments.map((ship) => (\n                <div\n                  key={ship.id}\n                  className=\"border-b border-gray-200 last:border-b-0 bg-white\"\n                >\n                  <div className=\"bg-gray-50 px-4 py-2 flex justify-between items-center text-sm\">\n                    <div className=\"font-bold text-gray-700\">\n                      {new Date(ship.shipment_date).toLocaleDateString()}{' '}\n                      <span className=\"ml-2 font-mono text-gray-500\">\n                        No.{ship.delivery_note_number || ship.id.slice(0, 6)}\n                      </span>\n                    </div>\n                    <div className=\"font-bold text-gray-800\">\n                      å°è¨ˆ: Â¥{ship.total_amount.toLocaleString()}\n                    </div>\n                  </div>\n                  <div className=\"p-4\">\n                    <table className=\"w-full text-sm\">\n                      <thead>\n                        <tr className=\"text-xs text-gray-400 border-b\">\n                          <th className=\"text-left py-1\">å“å / å‹ç•ª</th>\n                          <th className=\"text-right py-1 w-20\">æ•°é‡</th>\n                          <th className=\"text-right py-1 w-24\">å˜ä¾¡</th>\n                          <th className=\"text-right py-1 w-24\">é‡‘é¡</th>\n                        </tr>\n                      </thead>\n                      <tbody>\n                        {/* eslint-disable-next-line @typescript-eslint/no-explicit-any */}\n                        {ship.shipment_items.map((item: any) => (\n                          <tr key={item.id}>\n                            <td className=\"py-2 pr-2\">\n                              <div className=\"text-gray-800\">\n                                {item.products?.name}\n                              </div>\n                            </td>\n                            <td className=\"py-2 text-right\">\n                              {item.quantity.toLocaleString()}\n                            </td>\n                            <td className=\"py-2 text-right\">\n                              @{item.unit_price.toLocaleString()}\n                            </td>\n                            <td className=\"py-2 text-right text-gray-700\">\n                              Â¥{item.line_total.toLocaleString()}\n                            </td>\n                          </tr>\n                        ))}\n                      </tbody>\n                    </table>\n                  </div>\n                </div>\n              ))}\n            </div>\n          </div>\n          <div className=\"lg:col-span-1\">\n            <div className=\"bg-white border border-gray-200 rounded-lg p-6 shadow-sm sticky top-6\">\n              <h2 className=\"font-bold text-xl text-gray-800 mb-6 border-b pb-2\">\n                è«‹æ±‚é‡‘é¡ åˆè¨ˆ\n              </h2>\n              <div className=\"space-y-3 mb-6\">\n                <div className=\"flex justify-between text-gray-600\">\n                  <span>ç¨æŠœåˆè¨ˆ</span>\n                  <span className=\"font-bold\">\n                    Â¥ {totalExclTax.toLocaleString()}\n                  </span>\n                </div>\n                <div className=\"flex justify-between text-gray-600\">\n                  <span>æ¶ˆè²»ç¨ (10%)</span>\n                  <span className=\"font-bold\">Â¥ {tax.toLocaleString()}</span>\n                </div>\n              </div>\n              <div className=\"flex justify-between items-center border-t-2 border-gray-800 pt-4 mb-8\">\n                <span className=\"font-bold text-lg\">ã”è«‹æ±‚é¡</span>\n                <span className=\"font-bold text-2xl text-indigo-700\">\n                  Â¥ {totalAmount.toLocaleString()}\n                </span>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hibino\\otsudenki-portal\\src\\app\\(main)\\invoices\\create\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hibino\\otsudenki-portal\\src\\app\\(main)\\invoices\\page.tsx","messages":[],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":9,"column":44,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":9,"endColumn":47,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[284,287],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[284,287],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":67,"column":43,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":67,"endColumn":46,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2388,2391],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2388,2391],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hibino\\otsudenki-portal\\src\\app\\(main)\\layout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hibino\\otsudenki-portal\\src\\app\\(main)\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hibino\\otsudenki-portal\\src\\app\\(main)\\partners\\actions.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hibino\\otsudenki-portal\\src\\app\\(main)\\partners\\page.tsx","messages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\nC:\\Users\\hibino\\otsudenki-portal\\src\\app\\(main)\\partners\\page.tsx:31:5\n  29 |\n  30 |   useEffect(() => {\n> 31 |     loadPartners();\n     |     ^^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  32 |   }, [loadPartners]);\n  33 |\n  34 |   // æ–°è¦ç™»éŒ²ãƒœã‚¿ãƒ³","line":31,"column":5,"nodeType":null,"endLine":31,"endColumn":17}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport { useState, useEffect, useCallback } from 'react';\nimport {\n  getPartners,\n  createPartner,\n  updatePartner,\n  deletePartner,\n} from './actions';\nimport type { Partner } from '@/types/models';\n\nexport default function PartnersPage() {\n  const [partners, setPartners] = useState<Partner[]>([]);\n  const [isLoading, setIsLoading] = useState(true);\n\n  // ç·¨é›†ãƒ¢ãƒ¼ãƒ€ãƒ«ç”¨\n  const [isEditing, setIsEditing] = useState(false);\n  const [formData, setFormData] = useState<Partial<Partner>>({\n    closing_date: 99,\n  });\n\n  // ãƒ‡ãƒ¼ã‚¿ãƒ­ãƒ¼ãƒ‰\n  const loadPartners = useCallback(async () => {\n    setIsLoading(true);\n    const data = await getPartners();\n    setPartners(data);\n    setIsLoading(false);\n  }, []);\n\n  useEffect(() => {\n    loadPartners();\n  }, [loadPartners]);\n\n  // æ–°è¦ç™»éŒ²ãƒœã‚¿ãƒ³\n  const handleCreate = () => {\n    setFormData({ closing_date: 99 }); // åˆæœŸå€¤ãƒªã‚»ãƒƒãƒˆ\n    setIsEditing(true);\n  };\n\n  // ç·¨é›†ãƒœã‚¿ãƒ³\n  const handleEdit = (p: Partner) => {\n    setFormData({ ...p });\n    setIsEditing(true);\n  };\n\n  // å‰Šé™¤ãƒœã‚¿ãƒ³\n  const handleDelete = async (id: string) => {\n    if (\n      !confirm(\n        'ã“ã®å–å¼•å…ˆã‚’å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ\\nâ€»é–¢é€£ã™ã‚‹è£½å“ã‚„å±¥æ­´ãŒã‚ã‚‹å ´åˆã€ã‚¨ãƒ©ãƒ¼ã«ãªã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚'\n      )\n    )\n      return;\n\n    const res = await deletePartner(id);\n    if (res.success) {\n      alert(res.message);\n      loadPartners();\n    } else {\n      alert(res.message);\n    }\n  };\n\n  // ä¿å­˜å‡¦ç†\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    if (!formData.name) return alert('å–å¼•å…ˆåã¯å¿…é ˆã§ã™');\n\n    const fd = new FormData();\n    fd.set('name', formData.name);\n    fd.set('code', formData.code ?? '');\n    fd.set('address', formData.address ?? '');\n    fd.set('phone', formData.phone ?? '');\n    fd.set('memo', formData.memo ?? '');\n    fd.set('closing_date', String(formData.closing_date ?? 99));\n\n    const res = formData.id\n      ? await updatePartner(formData.id, fd)\n      : await createPartner(fd);\n    if (res.success) {\n      alert(res.message);\n      setIsEditing(false);\n      loadPartners();\n    } else {\n      alert(res.message);\n    }\n  };\n\n  // ç· ã‚æ—¥è¡¨ç¤ºãƒ˜ãƒ«ãƒ‘ãƒ¼\n  const getClosingLabel = (day: number | null) => {\n    const value = day ?? 99;\n    if (value === 99)\n      return (\n        <span className=\"bg-gray-100 text-gray-600 px-2 py-1 rounded text-xs font-bold\">\n          æœ«ç· ã‚\n        </span>\n      );\n    return (\n      <span className=\"bg-blue-100 text-blue-800 px-2 py-1 rounded text-xs font-bold\">\n        {value}æ—¥ç· ã‚\n      </span>\n    );\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex justify-between items-center\">\n        <h1 className=\"text-2xl font-bold text-gray-800\">å–å¼•å…ˆãƒã‚¹ã‚¿</h1>\n        <button\n          onClick={handleCreate}\n          className=\"bg-indigo-600 text-white px-4 py-2 rounded shadow hover:bg-indigo-700 transition-colors\"\n        >\n          ï¼‹ æ–°è¦ç™»éŒ²\n        </button>\n      </div>\n\n      <div className=\"bg-white border border-gray-200 rounded-lg shadow-sm overflow-hidden\">\n        {isLoading ? (\n          <div className=\"p-12 text-center text-gray-500\">èª­ã¿è¾¼ã¿ä¸­...</div>\n        ) : partners.length === 0 ? (\n          <div className=\"p-12 text-center text-gray-500\">\n            ãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚Šã¾ã›ã‚“\n          </div>\n        ) : (\n          <table className=\"min-w-full divide-y divide-gray-200\">\n            <thead className=\"bg-gray-50\">\n              <tr>\n                <th className=\"px-6 py-3 text-left text-xs font-bold text-gray-500 uppercase tracking-wider w-24\">\n                  ã‚³ãƒ¼ãƒ‰\n                </th>\n                <th className=\"px-6 py-3 text-left text-xs font-bold text-gray-500 uppercase tracking-wider\">\n                  å–å¼•å…ˆå\n                </th>\n                <th className=\"px-6 py-3 text-left text-xs font-bold text-gray-500 uppercase tracking-wider w-32\">\n                  è«‹æ±‚ç· ã‚æ—¥\n                </th>\n                <th className=\"px-6 py-3 text-left text-xs font-bold text-gray-500 uppercase tracking-wider\">\n                  é€£çµ¡å…ˆ / ãƒ¡ãƒ¢\n                </th>\n                <th className=\"px-6 py-3 text-center text-xs font-bold text-gray-500 uppercase tracking-wider w-32\">\n                  æ“ä½œ\n                </th>\n              </tr>\n            </thead>\n            <tbody className=\"bg-white divide-y divide-gray-200\">\n              {partners.map((p) => (\n                <tr key={p.id} className=\"hover:bg-gray-50\">\n                  <td className=\"px-6 py-4 text-sm font-mono text-gray-600\">\n                    {p.code || '-'}\n                  </td>\n                  <td className=\"px-6 py-4 text-sm font-bold text-gray-800\">\n                    {p.name}\n                  </td>\n                  <td className=\"px-6 py-4 text-sm\">\n                    {getClosingLabel(p.closing_date)}\n                  </td>\n                  <td className=\"px-6 py-4 text-sm text-gray-500\">\n                    <div>{p.address}</div>\n                    <div className=\"text-xs\">{p.phone}</div>\n                    {p.memo && (\n                      <div className=\"text-xs text-gray-400 mt-1\">\n                        â€»{p.memo}\n                      </div>\n                    )}\n                  </td>\n                  <td className=\"px-6 py-4 text-center text-sm\">\n                    <button\n                      onClick={() => handleEdit(p)}\n                      className=\"text-indigo-600 hover:text-indigo-900 mr-4\"\n                    >\n                      ç·¨é›†\n                    </button>\n                    <button\n                      onClick={() => handleDelete(p.id)}\n                      className=\"text-red-600 hover:text-red-900\"\n                    >\n                      å‰Šé™¤\n                    </button>\n                  </td>\n                </tr>\n              ))}\n            </tbody>\n          </table>\n        )}\n      </div>\n\n      {/* ç·¨é›†ãƒ¢ãƒ¼ãƒ€ãƒ« */}\n      {isEditing && (\n        <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 p-4\">\n          <div className=\"bg-white rounded-lg shadow-xl w-full max-w-md\">\n            <div className=\"p-6 border-b border-gray-100\">\n              <h3 className=\"text-lg font-bold text-gray-900\">\n                {formData.id ? 'å–å¼•å…ˆã‚’ç·¨é›†' : 'æ–°è¦å–å¼•å…ˆç™»éŒ²'}\n              </h3>\n            </div>\n\n            <form onSubmit={handleSubmit} className=\"p-6 space-y-4\">\n              <div className=\"grid grid-cols-2 gap-4\">\n                <div>\n                  <label className=\"block text-sm font-bold text-gray-700 mb-1\">\n                    å–å¼•å…ˆã‚³ãƒ¼ãƒ‰\n                  </label>\n                  <input\n                    type=\"text\"\n                    className=\"w-full border border-gray-300 rounded px-3 py-2 focus:ring-indigo-500 focus:border-indigo-500\"\n                    placeholder=\"C001\"\n                    value={formData.code || ''}\n                    onChange={(e) =>\n                      setFormData({ ...formData, code: e.target.value })\n                    }\n                  />\n                </div>\n                <div>\n                  <label className=\"block text-sm font-bold text-gray-700 mb-1\">\n                    ç· ã‚æ—¥è¨­å®š\n                  </label>\n                  <select\n                    className=\"w-full border border-gray-300 rounded px-3 py-2 focus:ring-indigo-500 focus:border-indigo-500\"\n                    value={formData.closing_date ?? 99}\n                    onChange={(e) =>\n                      setFormData({\n                        ...formData,\n                        closing_date: Number(e.target.value),\n                      })\n                    }\n                  >\n                    <option value={99}>æœ«ç· ã‚ (ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ)</option>\n                    <option value={20}>20æ—¥ç· ã‚</option>\n                    <option value={15}>15æ—¥ç· ã‚</option>\n                    <option value={10}>10æ—¥ç· ã‚</option>\n                    <option value={25}>25æ—¥ç· ã‚</option>\n                    <option value={5}>5æ—¥ç· ã‚</option>\n                  </select>\n                </div>\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-bold text-gray-700 mb-1\">\n                  å–å¼•å…ˆå <span className=\"text-red-500\">*</span>\n                </label>\n                <input\n                  type=\"text\"\n                  required\n                  className=\"w-full border border-gray-300 rounded px-3 py-2 focus:ring-indigo-500 focus:border-indigo-500\"\n                  placeholder=\"æ ªå¼ä¼šç¤¾ã€‡ã€‡\"\n                  value={formData.name || ''}\n                  onChange={(e) =>\n                    setFormData({ ...formData, name: e.target.value })\n                  }\n                />\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-bold text-gray-700 mb-1\">\n                  ä½æ‰€\n                </label>\n                <input\n                  type=\"text\"\n                  className=\"w-full border border-gray-300 rounded px-3 py-2 focus:ring-indigo-500 focus:border-indigo-500\"\n                  value={formData.address || ''}\n                  onChange={(e) =>\n                    setFormData({ ...formData, address: e.target.value })\n                  }\n                />\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-bold text-gray-700 mb-1\">\n                  é›»è©±ç•ªå·\n                </label>\n                <input\n                  type=\"text\"\n                  className=\"w-full border border-gray-300 rounded px-3 py-2 focus:ring-indigo-500 focus:border-indigo-500\"\n                  value={formData.phone || ''}\n                  onChange={(e) =>\n                    setFormData({ ...formData, phone: e.target.value })\n                  }\n                />\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-bold text-gray-700 mb-1\">\n                  ãƒ¡ãƒ¢\n                </label>\n                <textarea\n                  className=\"w-full border border-gray-300 rounded px-3 py-2 focus:ring-indigo-500 focus:border-indigo-500\"\n                  rows={2}\n                  value={formData.memo || ''}\n                  onChange={(e) =>\n                    setFormData({ ...formData, memo: e.target.value })\n                  }\n                />\n              </div>\n\n              <div className=\"flex justify-end gap-3 pt-4 border-t border-gray-100\">\n                <button\n                  type=\"button\"\n                  onClick={() => setIsEditing(false)}\n                  className=\"px-4 py-2 text-gray-600 bg-gray-100 rounded hover:bg-gray-200\"\n                >\n                  ã‚­ãƒ£ãƒ³ã‚»ãƒ«\n                </button>\n                <button\n                  type=\"submit\"\n                  className=\"px-6 py-2 text-white bg-indigo-600 rounded font-bold hover:bg-indigo-700 shadow\"\n                >\n                  ä¿å­˜ã™ã‚‹\n                </button>\n              </div>\n            </form>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hibino\\otsudenki-portal\\src\\app\\(main)\\partners\\partner-list.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":6,"column":63,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":6,"endColumn":66,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[189,192],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[189,192],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport { useState } from 'react';\nimport { updatePartner, deletePartner } from './actions'; // ä¿®æ­£: æ­£ã—ã„åå‰ã§ã‚¤ãƒ³ãƒãƒ¼ãƒˆ\n\nexport default function PartnerList({ partners }: { partners: any[] }) {\n  const [editingId, setEditingId] = useState<string | null>(null);\n\n  const handleDelete = async (id: string) => {\n    if (!confirm('æœ¬å½“ã«å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ')) return;\n    const res = await deletePartner(id);\n    alert(res.message);\n  };\n\n  const handleUpdate = async (e: React.FormEvent<HTMLFormElement>) => {\n    e.preventDefault();\n    if (!editingId) return;\n    const formData = new FormData(e.currentTarget);\n    const res = await updatePartner(editingId, formData);\n    alert(res.message);\n    if (res.success) setEditingId(null);\n  };\n\n  return (\n    <div className=\"bg-white shadow rounded-lg overflow-hidden border border-gray-200\">\n      <table className=\"min-w-full divide-y divide-gray-200\">\n        <thead className=\"bg-gray-50\">\n          <tr>\n            <th className=\"px-6 py-3 text-left text-xs font-bold text-gray-500\">\n              ã‚³ãƒ¼ãƒ‰\n            </th>\n            <th className=\"px-6 py-3 text-left text-xs font-bold text-gray-500\">\n              å–å¼•å…ˆå\n            </th>\n            <th className=\"px-6 py-3 text-left text-xs font-bold text-gray-500\">\n              ç· ã‚æ—¥\n            </th>\n            <th className=\"px-6 py-3 text-right text-xs font-bold text-gray-500\">\n              æ“ä½œ\n            </th>\n          </tr>\n        </thead>\n        <tbody className=\"divide-y divide-gray-200\">\n          {partners.map((p) => (\n            <tr key={p.id} className=\"hover:bg-gray-50\">\n              {editingId === p.id ? (\n                <td colSpan={4} className=\"p-4 bg-blue-50\">\n                  <form\n                    onSubmit={handleUpdate}\n                    className=\"flex gap-2 items-center\"\n                  >\n                    <input\n                      name=\"code\"\n                      defaultValue={p.code}\n                      className=\"border p-1 w-20 rounded\"\n                      placeholder=\"ã‚³ãƒ¼ãƒ‰\"\n                      required\n                    />\n                    <input\n                      name=\"name\"\n                      defaultValue={p.name}\n                      className=\"border p-1 flex-1 rounded\"\n                      placeholder=\"å–å¼•å…ˆå\"\n                      required\n                    />\n                    <select\n                      name=\"closing_date\"\n                      defaultValue={p.closing_date}\n                      className=\"border p-1 w-24 rounded\"\n                    >\n                      <option value=\"99\">æœ«ç· ã‚</option>\n                      <option value=\"20\">20æ—¥</option>\n                      <option value=\"15\">15æ—¥</option>\n                      <option value=\"10\">10æ—¥</option>\n                    </select>\n                    <button\n                      type=\"submit\"\n                      className=\"bg-blue-600 text-white px-3 py-1 rounded text-sm\"\n                    >\n                      ä¿å­˜\n                    </button>\n                    <button\n                      type=\"button\"\n                      onClick={() => setEditingId(null)}\n                      className=\"bg-gray-400 text-white px-3 py-1 rounded text-sm\"\n                    >\n                      ä¸­æ­¢\n                    </button>\n                  </form>\n                </td>\n              ) : (\n                <>\n                  <td className=\"px-6 py-4 text-sm font-mono text-gray-600\">\n                    {p.code}\n                  </td>\n                  <td className=\"px-6 py-4 text-sm font-bold text-gray-800\">\n                    {p.name}\n                  </td>\n                  <td className=\"px-6 py-4 text-sm text-gray-500\">\n                    {p.closing_date === 99\n                      ? 'æœ«ç· ã‚'\n                      : `${p.closing_date}æ—¥ç· ã‚`}\n                  </td>\n                  <td className=\"px-6 py-4 text-right text-sm space-x-2\">\n                    <button\n                      onClick={() => setEditingId(p.id)}\n                      className=\"text-indigo-600 hover:text-indigo-900 font-bold\"\n                    >\n                      ç·¨é›†\n                    </button>\n                    <button\n                      onClick={() => handleDelete(p.id)}\n                      className=\"text-red-600 hover:text-red-900\"\n                    >\n                      å‰Šé™¤\n                    </button>\n                  </td>\n                </>\n              )}\n            </tr>\n          ))}\n        </tbody>\n      </table>\n    </div>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hibino\\otsudenki-portal\\src\\app\\(main)\\prices\\actions.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hibino\\otsudenki-portal\\src\\app\\(main)\\prices\\bulk\\actions.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hibino\\otsudenki-portal\\src\\app\\(main)\\prices\\bulk\\bulk-register.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hibino\\otsudenki-portal\\src\\app\\(main)\\prices\\bulk\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":25,"column":55,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":25,"endColumn":58,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[666,669],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[666,669],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { createClient } from '@/utils/supabase/server';\nimport BulkRegister from './bulk-register';\nimport Link from 'next/link';\n\nexport default async function BulkRegisterPage() {\n  const supabase = await createClient();\n\n  // ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆç”Ÿæˆç”¨ã«ã€å»ƒç›¤ã§ãªã„å…¨è£½å“ã‚’å–å¾—\n  // ã‚«ãƒ©ãƒ åã‚’ä¿®æ­£: customer_product_code -> product_code, color_text -> color\n  const { data: products } = await supabase\n    .from('products')\n    .select(\n      `\n      id,\n      product_code, \n      name,\n      color,\n      partners ( name )\n    `\n    )\n    .eq('is_discontinued', false)\n    .order('product_code');\n\n  // Supabaseã®ãƒªãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã¯é…åˆ—ã§è¿”ã‚‹ãŸã‚ã€1ä»¶ã ã‘å–ã‚Šå‡ºã—ã¦å‹ã‚’åˆã‚ã›ã‚‹\n  const normalizedProducts = (products || []).map((p: any) => ({\n    ...p,\n    partners: Array.isArray(p.partners) ? (p.partners[0] ?? null) : p.partners,\n  }));\n\n  return (\n    <div className=\"max-w-5xl mx-auto\">\n      <div className=\"flex items-center justify-between mb-8\">\n        <div>\n          <h1 className=\"text-2xl font-bold text-gray-900\">å˜ä¾¡ä¸€æ‹¬ç™»éŒ²</h1>\n          <p className=\"text-gray-600 mt-2\">\n            è£½å“ãƒªã‚¹ãƒˆå…¥ã‚Šãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã€å˜ä¾¡ã‚’å…¥åŠ›ã—ã¦ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã—ã¦ãã ã•ã„ã€‚\n          </p>\n        </div>\n        <Link\n          href=\"/prices\"\n          className=\"text-sm font-semibold text-gray-900 hover:text-gray-700\"\n        >\n          ä¸€è¦§ã«æˆ»ã‚‹\n        </Link>\n      </div>\n\n      <BulkRegister products={normalizedProducts} />\n    </div>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hibino\\otsudenki-portal\\src\\app\\(main)\\prices\\new\\actions.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hibino\\otsudenki-portal\\src\\app\\(main)\\prices\\new\\form-content.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hibino\\otsudenki-portal\\src\\app\\(main)\\prices\\new\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":22,"column":55,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":22,"endColumn":58,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[561,564],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[561,564],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { createClient } from '@/utils/supabase/server';\nimport FormContent from './form-content';\n\nexport default async function NewPricePage() {\n  const supabase = await createClient();\n\n  // ä¿®æ­£: customer_product_code -> product_code, color_text -> color\n  const { data: products } = await supabase\n    .from('products')\n    .select(\n      `\n      id,\n      name,\n      product_code,\n      color,\n      partners ( name )\n    `\n    )\n    .eq('is_discontinued', false) // å»ƒç›¤å“ã¯é™¤å¤–\n    .order('product_code');\n\n  const normalizedProducts = (products || []).map((p: any) => ({\n    ...p,\n    partners: Array.isArray(p.partners) ? (p.partners[0] ?? null) : p.partners,\n  }));\n\n  return (\n    <div className=\"max-w-2xl mx-auto\">\n      <div className=\"mb-8\">\n        <h1 className=\"text-2xl font-bold text-gray-900\">å˜ä¾¡æ–°è¦ç™»éŒ²</h1>\n        <p className=\"text-gray-600 mt-2\">\n          æ—¢å­˜ã®è£½å“ã«å¯¾ã—ã¦ã€æ–°ã—ã„é©ç”¨å˜ä¾¡ã‚’ç™»éŒ²ã—ã¾ã™ã€‚\n        </p>\n      </div>\n\n      <div className=\"bg-white shadow rounded-lg p-6\">\n        <FormContent products={normalizedProducts} />\n      </div>\n    </div>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hibino\\otsudenki-portal\\src\\app\\(main)\\prices\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":89,"column":40,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":89,"endColumn":43,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2170,2173],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2170,2173],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { createClient } from '@/utils/supabase/server';\nimport PriceMatrix from './price-list'; // ãƒ•ã‚¡ã‚¤ãƒ«åã¯ãã®ã¾ã¾ã§ä¸­èº«ã‚’å¤‰ãˆã¾ã™\nimport { Partner } from '@/types/models';\n\ntype Props = {\n  searchParams: Promise<{ [key: string]: string | string[] | undefined }>;\n};\n\nexport default async function PricesPage(props: Props) {\n  const searchParams = await props.searchParams;\n  const supabase = await createClient();\n\n  const partnerName =\n    typeof searchParams.partner === 'string' ? searchParams.partner : '';\n  const keyword = typeof searchParams.q === 'string' ? searchParams.q : '';\n  // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯å»ƒç›¤ã‚’è¡¨ç¤ºã—ãªã„\n  const showDiscontinued = searchParams.show_discontinued === 'true';\n\n  // --- 1. è£½å“ãƒ‡ãƒ¼ã‚¿ã‚’ä¸»è»¸ã«å–å¾— ---\n  // è£½å“ã«é–¢é€£ã™ã‚‹ã€Œå…¨ã¦ã®ã€å˜ä¾¡æƒ…å ±ã‚’å–å¾—ã—ã¾ã™\n  let query = supabase.from('products').select(`\n      *,\n      partners!inner ( name ),\n      prices (\n        id,\n        unit_price,\n        valid_from,\n        reason,\n        status\n      )\n    `);\n\n  // (A) å»ƒç›¤ãƒ•ã‚£ãƒ«ã‚¿\n  if (!showDiscontinued) {\n    query = query.eq('is_discontinued', false);\n  }\n\n  // (B) å–å¼•å…ˆãƒ•ã‚£ãƒ«ã‚¿\n  if (partnerName) {\n    query = query.eq('partners.name', partnerName);\n  }\n\n  // (C) ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰æ¤œç´¢\n  if (keyword) {\n    query = query.or(\n      `product_code.ilike.%${keyword}%,name.ilike.%${keyword}%,color.ilike.%${keyword}%,memo.ilike.%${keyword}%`\n    );\n  }\n\n  // ã‚½ãƒ¼ãƒˆã¨ä»¶æ•°åˆ¶é™\n  query = query\n    .order('partners(name)', { ascending: true }) // å–å¼•å…ˆé †\n    .order('product_code', { ascending: true }) // å‹ç•ªé †\n    .limit(2000);\n\n  // --- 2. å–å¼•å…ˆãƒã‚¹ã‚¿å–å¾— ---\n  const partnersQuery = supabase\n    .from('partners')\n    .select('id, name')\n    .order('name');\n\n  // --- 3. ãƒ¦ãƒ¼ã‚¶ãƒ¼æ¨©é™ç¢ºèª ---\n  const {\n    data: { user },\n  } = await supabase.auth.getUser();\n  const { data: profile } = await supabase\n    .from('profiles')\n    .select('role')\n    .eq('id', user?.id)\n    .single();\n\n  const userRole = profile?.role || 'staff';\n\n  const [productsResult, partnersResult] = await Promise.all([\n    query,\n    partnersQuery,\n  ]);\n\n  if (productsResult.error) {\n    return (\n      <div className=\"text-red-500\">\n        ãƒ‡ãƒ¼ã‚¿å–å¾—ã‚¨ãƒ©ãƒ¼: {productsResult.error.message}\n      </div>\n    );\n  }\n\n  return (\n    <PriceMatrix\n      products={productsResult.data as any[]}\n      masterPartners={partnersResult.data as Partner[]}\n      userRole={userRole}\n    />\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hibino\\otsudenki-portal\\src\\app\\(main)\\prices\\price-list.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hibino\\otsudenki-portal\\src\\app\\(main)\\products\\actions.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":38,"column":15,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":38,"endColumn":18,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1005,1008],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1005,1008],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'id' is defined but never used.","line":43,"column":37,"nodeType":"Identifier","messageId":"unusedVar","endLine":43,"endColumn":39},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'formData' is defined but never used.","line":43,"column":49,"nodeType":"Identifier","messageId":"unusedVar","endLine":43,"endColumn":57},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'supabase' is assigned a value but never used.","line":44,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":44,"endColumn":17},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":57,"column":15,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":57,"endColumn":18,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1645,1648],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1645,1648],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use server';\n\nimport { createClient } from '@/utils/supabase/server';\nimport { revalidatePath } from 'next/cache';\n\nexport async function getProducts() {\n  const supabase = await createClient();\n  const { data } = await supabase\n    .from('products')\n    .select('*, partners(name)')\n    .order('product_code');\n\n  // å®‰å…¨ãªå‹å¤‰æ›\n  return (\n    data?.map((d) => ({\n      ...d,\n      partners: Array.isArray(d.partners) ? d.partners[0] : d.partners,\n    })) || []\n  );\n}\n\nexport async function createProduct(formData: FormData) {\n  const supabase = await createClient();\n\n  const rawData = {\n    partner_id: formData.get('partner_id'),\n    name: formData.get('name'),\n    product_code: formData.get('product_code'),\n    color: formData.get('color'),\n    unit_weight: formData.get('unit_weight') || 0,\n  };\n\n  try {\n    const { error } = await supabase.from('products').insert(rawData);\n    if (error) throw error;\n    revalidatePath('/products');\n    return { success: true, message: 'ç™»éŒ²ã—ã¾ã—ãŸ' };\n  } catch (e: any) {\n    return { success: false, message: e.message };\n  }\n}\n\nexport async function updateProduct(id: string, formData: FormData) {\n  const supabase = await createClient(); // ã“ã“ã«updateå‡¦ç†ãŒå¿…è¦ã§ã™\n  // ç°¡æ˜“å®Ÿè£…: ä»Šå›ã¯ä¸€è¦§è¡¨ç¤ºã§ã®ã‚¨ãƒ©ãƒ¼ã‚’é˜²ããŸã‚ã“ã“ã¾ã§ã¨ã—ã¾ã™ãŒã€\n  // å¿…è¦ã§ã‚ã‚Œã°updateå‡¦ç†ã‚‚å®Ÿè£…ã—ã¾ã™ã€‚ã¾ãšã¯ãƒ“ãƒ«ãƒ‰ã‚’é€šã™ãŸã‚ã«å¿…é ˆé–¢æ•°ã ã‘æ•´å‚™ã—ã¾ã™ã€‚\n  return { success: true, message: 'æ›´æ–°æ©Ÿèƒ½ã¯æº–å‚™ä¸­ã§ã™' };\n}\n\nexport async function deleteProduct(id: string) {\n  const supabase = await createClient();\n  try {\n    const { error } = await supabase.from('products').delete().eq('id', id);\n    if (error) throw error;\n    revalidatePath('/products');\n    return { success: true, message: 'å‰Šé™¤ã—ã¾ã—ãŸ' };\n  } catch (e: any) {\n    return { success: false, message: e.message };\n  }\n}\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hibino\\otsudenki-portal\\src\\app\\(main)\\products\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hibino\\otsudenki-portal\\src\\app\\(main)\\products\\product-list.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hibino\\otsudenki-portal\\src\\app\\(main)\\shipments\\[id]\\print\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'createClient' is defined but never used.","line":1,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":22,"suggestions":[{"messageId":"removeUnusedImportDeclaration","data":{"varName":"createClient"},"fix":{"range":[0,55],"text":""},"desc":"Remove unused import declaration."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":97,"column":40,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":97,"endColumn":43,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3733,3736],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3733,3736],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { createClient } from '@/utils/supabase/server';\nimport { getShipmentForPrint } from '@/app/(main)/inventory/actions';\nimport { notFound } from 'next/navigation';\nimport PrintButton from './print-button'; // â˜…ä½œæˆã—ãŸéƒ¨å“ã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆ\n\nexport default async function PrintShipmentPage({\n  params,\n}: {\n  params: { id: string };\n}) {\n  // ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿å–å¾—ã®éåŒæœŸå¯¾å¿œ\n  const { id } = await params;\n  const shipment = await getShipmentForPrint(id);\n\n  if (!shipment) return notFound();\n\n  const subTotal = shipment.total_amount;\n  const tax = Math.floor(subTotal * 0.1); // æ¶ˆè²»ç¨10%\n  const total = subTotal + tax;\n\n  return (\n    <div className=\"bg-white min-h-screen text-black p-8 md:p-12 print:p-0 print:text-sm\">\n      {/* â˜…ä¿®æ­£: ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆï¼ˆãƒœã‚¿ãƒ³ï¼‰ã‚’é…ç½® */}\n      <PrintButton />\n\n      {/* ç´å“æ›¸ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ (A4ç¸¦) */}\n      <div className=\"max-w-[210mm] mx-auto border border-gray-200 p-8 print:border-none print:p-0\">\n        {/* ãƒ˜ãƒƒãƒ€ãƒ¼ */}\n        <div className=\"flex justify-between items-end border-b-2 border-gray-800 pb-4 mb-8\">\n          <div>\n            <h1 className=\"text-3xl font-serif font-bold mb-2\">ç´ å“ æ›¸</h1>\n            <p className=\"text-sm text-gray-600\">\n              No.{' '}\n              {shipment.delivery_note_number ||\n                shipment.id.slice(0, 8).toUpperCase()}\n            </p>\n            <p className=\"text-sm text-gray-600\">\n              ç™ºè¡Œæ—¥: {new Date().toLocaleDateString('ja-JP')}\n            </p>\n          </div>\n          <div className=\"text-right\">\n            <h2 className=\"text-xl font-bold mb-1\">\n              {shipment.partners?.name} å¾¡ä¸­\n            </h2>\n            <p className=\"text-sm text-gray-500\">\n              ä¸‹è¨˜ã®é€šã‚Šç´å“ã„ãŸã—ã¾ã—ãŸã€‚\n            </p>\n          </div>\n        </div>\n\n        {/* è‡ªç¤¾æƒ…å ± & åˆè¨ˆé‡‘é¡ */}\n        <div className=\"flex justify-between mb-8\">\n          <div className=\"w-1/2\">\n            <div className=\"border-b border-gray-400 mb-2 pb-1\">\n              <span className=\"text-sm text-gray-500\">ç´å“æ—¥</span>\n              <span className=\"ml-4 font-bold text-lg\">\n                {new Date(shipment.shipment_date).toLocaleDateString('ja-JP')}\n              </span>\n            </div>\n            <div className=\"mt-4\">\n              <div className=\"flex justify-between border-b border-gray-300 py-1\">\n                <span>ç¨æŠœåˆè¨ˆ</span>\n                <span>Â¥ {subTotal.toLocaleString()}</span>\n              </div>\n              <div className=\"flex justify-between border-b border-gray-300 py-1\">\n                <span>æ¶ˆè²»ç¨ (10%)</span>\n                <span>Â¥ {tax.toLocaleString()}</span>\n              </div>\n              <div className=\"flex justify-between border-b-2 border-black py-1 mt-1 font-bold text-xl\">\n                <span>ã”è«‹æ±‚é‡‘é¡</span>\n                <span>Â¥ {total.toLocaleString()}</span>\n              </div>\n            </div>\n          </div>\n\n          <div className=\"w-1/3 text-sm text-right leading-relaxed\">\n            <p className=\"font-bold text-lg mb-1\">å¤§æ´¥é›»æ©Ÿå·¥æ¥­æ ªå¼ä¼šç¤¾</p>\n            <p>ã€’520-0000</p>\n            <p>æ»‹è³€çœŒå¤§æ´¥å¸‚ã€‡ã€‡ç”º1-1-1</p>\n            <p>TEL: 077-000-0000</p>\n            <p>æ‹…å½“: {shipment.created_by?.email || 'å–¶æ¥­éƒ¨'}</p>\n          </div>\n        </div>\n\n        {/* æ˜ç´°ãƒ†ãƒ¼ãƒ–ãƒ« */}\n        <table className=\"w-full text-sm border-collapse\">\n          <thead>\n            <tr className=\"bg-gray-100 border-t border-b border-gray-800\">\n              <th className=\"py-2 px-2 text-left w-12\">No.</th>\n              <th className=\"py-2 px-2 text-left\">å“å / å‹ç•ª / è‰²</th>\n              <th className=\"py-2 px-2 text-right w-24\">æ•°é‡</th>\n              <th className=\"py-2 px-2 text-right w-24\">å˜ä¾¡</th>\n              <th className=\"py-2 px-2 text-right w-28\">é‡‘é¡</th>\n            </tr>\n          </thead>\n          <tbody>\n            {shipment.items.map((item: any, index: number) => (\n              <tr key={item.id} className=\"border-b border-gray-300\">\n                <td className=\"py-3 px-2 text-center\">{index + 1}</td>\n                <td className=\"py-3 px-2\">\n                  <div className=\"font-bold text-gray-800\">\n                    {item.products?.name}\n                  </div>\n                  <div className=\"text-xs text-gray-500\">\n                    {item.products?.product_code} {item.products?.color}\n                  </div>\n                </td>\n                <td className=\"py-3 px-2 text-right\">\n                  {item.quantity.toLocaleString()}\n                </td>\n                <td className=\"py-3 px-2 text-right\">\n                  @{item.unit_price.toLocaleString()}\n                </td>\n                <td className=\"py-3 px-2 text-right font-bold\">\n                  Â¥ {item.line_total.toLocaleString()}\n                </td>\n              </tr>\n            ))}\n            {/* ç©ºè¡ŒåŸ‹ã‚ */}\n            {Array.from({\n              length: Math.max(0, 10 - shipment.items.length),\n            }).map((_, i) => (\n              <tr key={`empty-${i}`} className=\"border-b border-gray-200 h-12\">\n                <td></td>\n                <td></td>\n                <td></td>\n                <td></td>\n                <td></td>\n              </tr>\n            ))}\n          </tbody>\n        </table>\n\n        {/* å‚™è€ƒæ¬„ */}\n        <div className=\"mt-8 border border-gray-400 rounded p-4 h-32\">\n          <p className=\"text-xs text-gray-500 mb-1\">å‚™è€ƒ</p>\n          <p className=\"text-sm\"></p>\n        </div>\n      </div>\n    </div>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hibino\\otsudenki-portal\\src\\app\\(main)\\shipments\\[id]\\print\\print-button.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hibino\\otsudenki-portal\\src\\app\\(main)\\shipments\\page.tsx","messages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\nC:\\Users\\hibino\\otsudenki-portal\\src\\app\\(main)\\shipments\\page.tsx:31:5\n  29 |\n  30 |   useEffect(() => {\n> 31 |     loadData();\n     |     ^^^^^^^^ Avoid calling setState() directly within an effect\n  32 |   }, []);\n  33 |\n  34 |   const handleDelete = async (id: string) => {","line":31,"column":5,"nodeType":null,"endLine":31,"endColumn":13}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport { useState, useEffect } from 'react';\nimport Link from 'next/link';\nimport {\n  getShipmentList,\n  deleteShipment,\n} from '@/app/(main)/inventory/actions';\n\ntype Shipment = {\n  id: string;\n  shipment_date: string;\n  delivery_note_number: string | null;\n  total_amount: number;\n  partners: { name: string } | null;\n  created_at: string;\n};\n\nexport default function ShipmentListPage() {\n  const [shipments, setShipments] = useState<Shipment[]>([]);\n  const [isLoading, setIsLoading] = useState(true);\n\n  const loadData = async () => {\n    setIsLoading(true);\n    const data = await getShipmentList();\n    setShipments(data || []);\n    setIsLoading(false);\n  };\n\n  useEffect(() => {\n    loadData();\n  }, []);\n\n  const handleDelete = async (id: string) => {\n    if (\n      !confirm(\n        'ã“ã®ç´å“æ›¸ã‚’å‰Šé™¤ã—ã¦ã‚‚ã‚ˆã‚ã—ã„ã§ã™ã‹ï¼Ÿ\\n\\nãƒ»å‡ºè·ãƒ‡ãƒ¼ã‚¿ãŒå®Œå…¨ã«å–ã‚Šæ¶ˆã•ã‚Œã¾ã™\\nãƒ»è£½å“åœ¨åº«ãŒå…ƒã®æ•°ã«æˆ»ã‚Šã¾ã™'\n      )\n    )\n      return;\n\n    const res = await deleteShipment(id);\n    if (res.success) {\n      alert(res.message);\n      loadData(); // ãƒªãƒ­ãƒ¼ãƒ‰\n    } else {\n      alert(res.message);\n    }\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex justify-between items-center\">\n        <h1 className=\"text-2xl font-bold text-gray-800\">ç´å“æ›¸ ç®¡ç†</h1>\n        <div className=\"flex gap-4\">\n          <Link\n            href=\"/inventory\"\n            className=\"px-4 py-2 bg-gray-100 text-gray-600 rounded hover:bg-gray-200 transition-colors\"\n          >\n            â† åœ¨åº«ãƒ»å‡ºè·ç™»éŒ²ã¸æˆ»ã‚‹\n          </Link>\n          <button\n            onClick={loadData}\n            className=\"px-4 py-2 bg-blue-50 text-blue-600 rounded hover:bg-blue-100 transition-colors\"\n          >\n            æ›´æ–°\n          </button>\n        </div>\n      </div>\n\n      <div className=\"bg-white border border-gray-200 rounded-lg shadow-sm overflow-hidden\">\n        {isLoading ? (\n          <div className=\"p-12 text-center text-gray-500\">èª­ã¿è¾¼ã¿ä¸­...</div>\n        ) : shipments.length === 0 ? (\n          <div className=\"p-12 text-center text-gray-500\">\n            ç´å“æ›¸ãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚Šã¾ã›ã‚“\n          </div>\n        ) : (\n          <table className=\"min-w-full divide-y divide-gray-200\">\n            <thead className=\"bg-gray-50\">\n              <tr>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                  ç´å“æ—¥\n                </th>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                  No.\n                </th>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                  å–å¼•å…ˆ\n                </th>\n                <th className=\"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                  åˆè¨ˆé‡‘é¡\n                </th>\n                <th className=\"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                  æ“ä½œ\n                </th>\n              </tr>\n            </thead>\n            <tbody className=\"bg-white divide-y divide-gray-200\">\n              {shipments.map((shipment) => (\n                <tr\n                  key={shipment.id}\n                  className=\"hover:bg-gray-50 transition-colors\"\n                >\n                  <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">\n                    {new Date(shipment.shipment_date).toLocaleDateString(\n                      'ja-JP'\n                    )}\n                  </td>\n                  <td className=\"px-6 py-4 whitespace-nowrap text-sm font-mono text-gray-500\">\n                    {shipment.delivery_note_number ||\n                      shipment.id.slice(0, 8).toUpperCase()}\n                  </td>\n                  <td className=\"px-6 py-4 whitespace-nowrap text-sm font-bold text-gray-800\">\n                    {shipment.partners?.name}\n                  </td>\n                  <td className=\"px-6 py-4 whitespace-nowrap text-sm text-right font-bold text-gray-800\">\n                    Â¥ {shipment.total_amount.toLocaleString()}\n                  </td>\n                  <td className=\"px-6 py-4 whitespace-nowrap text-center text-sm font-medium flex justify-center gap-4\">\n                    {/* å°åˆ·ãƒœã‚¿ãƒ³ */}\n                    <a\n                      href={`/shipments/${shipment.id}/print`}\n                      target=\"_blank\"\n                      rel=\"noopener noreferrer\"\n                      className=\"text-blue-600 hover:text-blue-900 flex items-center gap-1\"\n                    >\n                      <svg\n                        xmlns=\"http://www.w3.org/2000/svg\"\n                        viewBox=\"0 0 20 20\"\n                        fill=\"currentColor\"\n                        className=\"w-4 h-4\"\n                      >\n                        <path\n                          fillRule=\"evenodd\"\n                          d=\"M5 2.75C5 1.784 5.784 1 6.75 1h6.5c.966 0 1.75.784 1.75 1.75v3.5a.75.75 0 01-1.5 0v-2a.25.25 0 00-.25-.25h-6.5a.25.25 0 00-.25.25v2a.75.75 0 01-1.5 0v-3.5zm2.5 8.5a.75.75 0 01.75-.75h6.5a.75.75 0 010 1.5h-6.5a.75.75 0 01-.75-.75zm0 3a.75.75 0 01.75-.75h6.5a.75.75 0 010 1.5h-6.5a.75.75 0 01-.75-.75zM2 10a4 4 0 014-4h1.5a.75.75 0 010 1.5H6a2.5 2.5 0 00-2.5 2.5v5.5A2.5 2.5 0 006 18h1.5a.75.75 0 010 1.5H6a4 4 0 01-4-4v-5.5zm12 0a4 4 0 014-4h-1.5a.75.75 0 000 1.5H18a2.5 2.5 0 012.5 2.5v5.5a2.5 2.5 0 01-2.5 2.5h-1.5a.75.75 0 000 1.5H18a4 4 0 004-4v-5.5z\"\n                          clipRule=\"evenodd\"\n                        />\n                      </svg>\n                      å°åˆ·\n                    </a>\n\n                    {/* å‰Šé™¤ãƒœã‚¿ãƒ³ */}\n                    <button\n                      onClick={() => handleDelete(shipment.id)}\n                      className=\"text-red-600 hover:text-red-900 flex items-center gap-1\"\n                    >\n                      <svg\n                        xmlns=\"http://www.w3.org/2000/svg\"\n                        viewBox=\"0 0 20 20\"\n                        fill=\"currentColor\"\n                        className=\"w-4 h-4\"\n                      >\n                        <path\n                          fillRule=\"evenodd\"\n                          d=\"M8.75 1A2.75 2.75 0 006 3.75v.443c-.795.077-1.584.176-2.365.298a.75.75 0 10.23 1.482l.149-.022.841 10.518A2.75 2.75 0 007.596 19h4.807a2.75 2.75 0 002.742-2.53l.841-10.52.149.023a.75.75 0 00.23-1.482A41.03 41.03 0 0014 4.193V3.75A2.75 2.75 0 0011.25 1h-2.5zM10 4c.84 0 1.673.025 2.5.075V3.75c0-.69-.56-1.25-1.25-1.25h-2.5c-.69 0-1.25.56-1.25 1.25v.325C8.327 4.025 9.16 4 10 4zM8.58 7.72a.75.75 0 00-1.5.06l.3 7.5a.75.75 0 101.5-.06l-.3-7.5zm4.34.06a.75.75 0 10-1.5-.06l-.3 7.5a.75.75 0 101.5.06l.3-7.5z\"\n                          clipRule=\"evenodd\"\n                        />\n                      </svg>\n                      å–æ¶ˆ\n                    </button>\n                  </td>\n                </tr>\n              ))}\n            </tbody>\n          </table>\n        )}\n      </div>\n    </div>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hibino\\otsudenki-portal\\src\\app\\(main)\\users\\actions.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hibino\\otsudenki-portal\\src\\app\\(main)\\users\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hibino\\otsudenki-portal\\src\\app\\(main)\\users\\user-list.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hibino\\otsudenki-portal\\src\\app\\layout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hibino\\otsudenki-portal\\src\\app\\login\\actions.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hibino\\otsudenki-portal\\src\\app\\login\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hibino\\otsudenki-portal\\src\\components\\Sidebar.tsx","messages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\nC:\\Users\\hibino\\otsudenki-portal\\src\\components\\Sidebar.tsx:25:7\n  23 |     const savedPin = localStorage.getItem('sidebar-pinned');\n  24 |     if (savedPin !== null) {\n> 25 |       setIsPinned(savedPin === 'true');\n     |       ^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  26 |     }\n  27 |   }, []);\n  28 |","line":25,"column":7,"nodeType":null,"endLine":25,"endColumn":18}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport { useState, useEffect } from 'react';\nimport Link from 'next/link';\nimport { usePathname, useRouter } from 'next/navigation';\nimport { createClient } from '@/utils/supabase/client';\n\ntype User = {\n  email?: string;\n};\n\nexport default function Sidebar({ user }: { user: User | null }) {\n  const pathname = usePathname();\n  const router = useRouter();\n  const supabase = createClient();\n\n  // --- ã‚¹ãƒ†ãƒ¼ãƒˆç®¡ç† ---\n  const [isPinned, setIsPinned] = useState(true);\n  const [isHovered, setIsHovered] = useState(false);\n\n  // åˆæœŸåŒ–æ™‚ã«localStorageã‹ã‚‰ãƒ”ãƒ³ç•™ã‚è¨­å®šã‚’èª­ã¿è¾¼ã‚€\n  useEffect(() => {\n    const savedPin = localStorage.getItem('sidebar-pinned');\n    if (savedPin !== null) {\n      setIsPinned(savedPin === 'true');\n    }\n  }, []);\n\n  // ãƒ”ãƒ³ç•™ã‚åˆ‡ã‚Šæ›¿ãˆ\n  const togglePin = () => {\n    const newState = !isPinned;\n    setIsPinned(newState);\n    localStorage.setItem('sidebar-pinned', String(newState));\n  };\n\n  // ãƒ­ã‚°ã‚¢ã‚¦ãƒˆå‡¦ç†\n  const handleSignOut = async () => {\n    await supabase.auth.signOut();\n    router.refresh();\n  };\n\n  // è¡¨ç¤ºçŠ¶æ…‹ã®åˆ¤å®š\n  const isExpanded = isPinned || isHovered;\n\n  // --- ãƒ¡ãƒ‹ãƒ¥ãƒ¼å®šç¾© (ã‚°ãƒ«ãƒ¼ãƒ—åŒ–) ---\n  const menuGroups = [\n    {\n      title: null, // ã‚¿ã‚¤ãƒˆãƒ«ãªã— (ãƒ›ãƒ¼ãƒ ãªã©)\n      items: [\n        {\n          name: 'ãƒ›ãƒ¼ãƒ ',\n          href: '/',\n          icon: (\n            <path\n              strokeLinecap=\"round\"\n              strokeLinejoin=\"round\"\n              d=\"M2.25 12l8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25\"\n            />\n          ),\n        },\n      ],\n    },\n    {\n      title: 'è²©å£²ãƒ»è£½é€ ', // æ¥­å‹™ç³»ã‚°ãƒ«ãƒ¼ãƒ—\n      items: [\n        {\n          name: 'æ¥­å‹™ç®¡ç†',\n          href: '/inventory',\n          icon: (\n            <path\n              strokeLinecap=\"round\"\n              strokeLinejoin=\"round\"\n              d=\"M9 12h3.75M9 15h3.75M9 18h3.75m3 .75H18a2.25 2.25 0 002.25-2.25V6.108c0-1.135-.845-2.098-1.976-2.192a48.424 48.424 0 00-1.123-.08m-5.801 0c-.065.21-.1.433-.1.664 0 .414.336.75.75.75h4.5a.75.75 0 00.75-.75 2.25 2.25 0 00-.1-.664m-5.8 0A2.251 2.251 0 0113.5 2.25H15c1.012 0 1.867.668 2.15 1.586m-5.8 0c-.376.023-.75.05-1.124.08C9.095 4.01 8.25 4.973 8.25 6.108V8.25m0 0H4.875c-.621 0-1.125.504-1.125 1.125v11.25c0 .621.504 1.125 1.125 1.125h9.75c.621 0 1.125-.504 1.125-1.125V9.375c0-.621-.504-1.125-1.125-1.125H8.25zM6.75 12h.008v.008H6.75V12zm0 3h.008v.008H6.75V15zm0 3h.008v.008H6.75V18z\"\n            />\n          ),\n        },\n        {\n          name: 'ç´å“æ›¸ç®¡ç†',\n          href: '/shipments',\n          icon: (\n            <path\n              strokeLinecap=\"round\"\n              strokeLinejoin=\"round\"\n              d=\"M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m2.25 0H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z\"\n            />\n          ),\n        },\n        {\n          name: 'è«‹æ±‚æ›¸ç™ºè¡Œ',\n          href: '/invoices',\n          // â˜…è¿½åŠ : è«‹æ±‚æ›¸\n          icon: (\n            <path\n              strokeLinecap=\"round\"\n              strokeLinejoin=\"round\"\n              d=\"M12 6v12m-3-2.818l.879.659c1.171.879 3.07.879 4.242 0 1.172-.879 1.172-2.303 0-3.182C13.536 12.219 12.768 12 12 12c-.725 0-1.45-.22-2.003-.659-1.106-.879-1.106-2.303 0-3.182s2.9-.879 4.006 0l.415.33M21 12a9 9 0 11-18 0 9 9 0 0118 0z\"\n            />\n          ),\n        },\n      ],\n    },\n    {\n      title: 'ãƒã‚¹ã‚¿ç®¡ç†', // è¨­å®šç³»ã‚°ãƒ«ãƒ¼ãƒ—\n      items: [\n        {\n          name: 'å–å¼•å…ˆãƒã‚¹ã‚¿',\n          href: '/partners',\n          icon: (\n            <path\n              strokeLinecap=\"round\"\n              strokeLinejoin=\"round\"\n              d=\"M15 19.128a9.38 9.38 0 002.625.372 9.337 9.337 0 004.121-.952 4.125 4.125 0 00-7.533-2.493M15 19.128v-.003c0-1.113-.285-2.16-.786-3.07M15 19.128v.106A12.318 12.318 0 018.624 21c-2.331 0-4.512-.645-6.374-1.766l-.001-.109a6.375 6.375 0 0111.964-3.07M12 6.375a3.375 3.375 0 11-6.75 0 3.375 3.375 0 016.75 0zm8.25 2.25a2.625 2.625 0 11-5.25 0 2.625 2.625 0 015.25 0z\"\n            />\n          ),\n        },\n        {\n          name: 'è£½å“ãƒã‚¹ã‚¿',\n          href: '/products',\n          icon: (\n            <path\n              strokeLinecap=\"round\"\n              strokeLinejoin=\"round\"\n              d=\"M20.25 7.5l-.625 10.632a2.25 2.25 0 01-2.247 2.118H6.622a2.25 2.25 0 01-2.247-2.118L3.75 7.5M10 11.25h4M3.375 7.5h17.25c.621 0 1.125-.504 1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125z\"\n            />\n          ),\n        },\n        {\n          name: 'è£½å“å˜ä¾¡ãƒªã‚¹ãƒˆ',\n          href: '/prices',\n          icon: (\n            <path\n              strokeLinecap=\"round\"\n              strokeLinejoin=\"round\"\n              d=\"M12 6v12m-3-2.818l.879.659c1.171.879 3.07.879 4.242 0 1.172-.879 1.172-2.303 0-3.182C13.536 12.219 12.768 12 12 12c-.725 0-1.45-.22-2.003-.659-1.106-.879-1.106-2.303 0-3.182s2.9-.879 4.006 0l.415.33M21 12a9 9 0 11-18 0 9 9 0 0118 0z\"\n            />\n          ),\n        },\n        {\n          name: 'ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†',\n          href: '/users',\n          icon: (\n            <path\n              strokeLinecap=\"round\"\n              strokeLinejoin=\"round\"\n              d=\"M17.982 18.725A7.488 7.488 0 0012 15.75a7.488 7.488 0 00-5.982 2.975m11.963 0a9 9 0 10-11.963 0m11.963 0A8.966 8.966 0 0112 21a8.966 8.966 0 01-5.982-2.275M15 9.75a3 3 0 11-6 0 3 3 0 016 0z\"\n            />\n          ),\n        },\n      ],\n    },\n  ];\n\n  return (\n    <div\n      className={`flex flex-col h-screen bg-gray-900 text-white transition-all duration-300 ease-in-out ${\n        isExpanded ? 'w-64' : 'w-16'\n      } relative z-20`}\n      onMouseEnter={() => setIsHovered(true)}\n      onMouseLeave={() => setIsHovered(false)}\n    >\n      {/* ãƒ˜ãƒƒãƒ€ãƒ¼ */}\n      <div className=\"flex h-16 items-center justify-between px-4 bg-gray-800 flex-shrink-0\">\n        {isExpanded ? (\n          <span className=\"text-xl font-bold tracking-wider truncate\">\n            Otsu Denki\n          </span>\n        ) : (\n          <span className=\"text-xl font-bold mx-auto\">OD</span>\n        )}\n\n        {isExpanded && (\n          <button\n            onClick={togglePin}\n            className={`p-1 rounded-md hover:bg-gray-700 transition-colors ${isPinned ? 'text-indigo-400' : 'text-gray-400'}`}\n            title={isPinned ? 'ã‚µã‚¤ãƒ‰ãƒãƒ¼ã‚’å›ºå®šè§£é™¤' : 'ã‚µã‚¤ãƒ‰ãƒãƒ¼ã‚’å›ºå®š'}\n          >\n            {isPinned ? (\n              <svg\n                xmlns=\"http://www.w3.org/2000/svg\"\n                viewBox=\"0 0 24 24\"\n                fill=\"currentColor\"\n                className=\"w-5 h-5\"\n              >\n                <path\n                  fillRule=\"evenodd\"\n                  d=\"M6.32 2.577a49.255 49.255 0 0111.36 0c1.497.174 2.57 1.46 2.57 2.93V21a.75.75 0 01-1.085.67L12 18.089l-7.165 3.583A.75.75 0 013.75 21V5.507c0-1.47 1.073-2.756 2.57-2.93z\"\n                  clipRule=\"evenodd\"\n                />\n              </svg>\n            ) : (\n              <svg\n                xmlns=\"http://www.w3.org/2000/svg\"\n                fill=\"none\"\n                viewBox=\"0 0 24 24\"\n                strokeWidth={1.5}\n                stroke=\"currentColor\"\n                className=\"w-5 h-5\"\n              >\n                <path\n                  strokeLinecap=\"round\"\n                  strokeLinejoin=\"round\"\n                  d=\"M17.593 3.322c1.1.128 1.907 1.077 1.907 2.185V21L12 17.25 4.5 21V5.507c0-1.108.806-2.057 1.907-2.185a48.507 48.507 0 0111.186 0z\"\n                />\n              </svg>\n            )}\n          </button>\n        )}\n      </div>\n\n      {/* ãƒ¡ãƒ‹ãƒ¥ãƒ¼ãƒªã‚¹ãƒˆ */}\n      <nav className=\"flex-1 py-4 px-2 overflow-x-hidden overflow-y-auto custom-scrollbar\">\n        {menuGroups.map((group, groupIndex) => (\n          <div key={groupIndex} className=\"mb-6\">\n            {/* ã‚°ãƒ«ãƒ¼ãƒ—ã‚¿ã‚¤ãƒˆãƒ« (å±•é–‹æ™‚ã®ã¿è¡¨ç¤º) */}\n            {group.title && isExpanded && (\n              <p className=\"px-3 mb-2 text-xs font-bold text-gray-500 uppercase tracking-wider\">\n                {group.title}\n              </p>\n            )}\n            {/* åŒºåˆ‡ã‚Šç·š (ç¸®å°æ™‚ã¯ã‚¿ã‚¤ãƒˆãƒ«ä»£ã‚ã‚Š) */}\n            {group.title && !isExpanded && (\n              <div className=\"my-2 border-t border-gray-700 mx-2\" />\n            )}\n\n            <div className=\"space-y-1\">\n              {group.items.map((item) => {\n                const isActive =\n                  pathname === item.href ||\n                  pathname.startsWith(`${item.href}/`);\n                return (\n                  <Link\n                    key={item.name}\n                    href={item.href}\n                    className={`flex items-center rounded-md px-3 py-2 text-sm font-medium transition-colors whitespace-nowrap ${\n                      isActive\n                        ? 'bg-indigo-600 text-white'\n                        : 'text-gray-300 hover:bg-gray-800 hover:text-white'\n                    }`}\n                  >\n                    <div\n                      className={`min-w-[1.25rem] w-5 h-5 flex items-center justify-center ${isActive ? 'text-white' : 'text-gray-400'}`}\n                    >\n                      <svg\n                        xmlns=\"http://www.w3.org/2000/svg\"\n                        fill=\"none\"\n                        viewBox=\"0 0 24 24\"\n                        strokeWidth={1.5}\n                        stroke=\"currentColor\"\n                        className=\"w-6 h-6\"\n                      >\n                        {item.icon}\n                      </svg>\n                    </div>\n                    <span\n                      className={`ml-3 transition-opacity duration-200 ${isExpanded ? 'opacity-100' : 'opacity-0 w-0'}`}\n                    >\n                      {item.name}\n                    </span>\n                  </Link>\n                );\n              })}\n            </div>\n          </div>\n        ))}\n      </nav>\n\n      {/* ãƒ•ãƒƒã‚¿ãƒ¼ */}\n      <div className=\"border-t border-gray-800 p-4 flex-shrink-0\">\n        <div\n          className={`flex items-center ${!isExpanded ? 'justify-center' : ''}`}\n        >\n          <div className=\"h-8 w-8 rounded-full bg-indigo-500 flex items-center justify-center text-sm font-bold text-white flex-shrink-0\">\n            {user?.email?.charAt(0).toUpperCase()}\n          </div>\n          {isExpanded && (\n            <div className=\"ml-3 truncate\">\n              <p className=\"text-sm font-medium text-white truncate max-w-[10rem]\">\n                {user?.email}\n              </p>\n              <button\n                onClick={handleSignOut}\n                className=\"text-xs text-gray-400 hover:text-white mt-1\"\n              >\n                ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ\n              </button>\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hibino\\otsudenki-portal\\src\\middleware.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hibino\\otsudenki-portal\\src\\types\\models.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hibino\\otsudenki-portal\\src\\utils\\supabase\\client.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hibino\\otsudenki-portal\\src\\utils\\supabase\\middleware.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'options' is defined but never used.","line":18,"column":48,"nodeType":"Identifier","messageId":"unusedVar","endLine":18,"endColumn":55}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { createServerClient } from '@supabase/ssr';\nimport { NextResponse, type NextRequest } from 'next/server';\n\nexport async function updateSession(request: NextRequest) {\n  let supabaseResponse = NextResponse.next({\n    request,\n  });\n\n  const supabase = createServerClient(\n    process.env.NEXT_PUBLIC_SUPABASE_URL!,\n    process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!,\n    {\n      cookies: {\n        getAll() {\n          return request.cookies.getAll();\n        },\n        setAll(cookiesToSet) {\n          cookiesToSet.forEach(({ name, value, options }) =>\n            request.cookies.set(name, value)\n          );\n          supabaseResponse = NextResponse.next({\n            request,\n          });\n          cookiesToSet.forEach(({ name, value, options }) =>\n            supabaseResponse.cookies.set(name, value, options)\n          );\n        },\n      },\n    }\n  );\n\n  // ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ã‚’å–å¾—\n  const {\n    data: { user },\n  } = await supabase.auth.getUser();\n\n  // æœªãƒ­ã‚°ã‚¤ãƒ³çŠ¶æ…‹ã§ã€ãƒ­ã‚°ã‚¤ãƒ³ç”»é¢ä»¥å¤–ã«è¡Œã“ã†ã¨ã—ãŸã‚‰ã€ãƒ­ã‚°ã‚¤ãƒ³ç”»é¢ã«å¼·åˆ¶é€é‚„\n  if (\n    !user &&\n    !request.nextUrl.pathname.startsWith('/login') &&\n    !request.nextUrl.pathname.startsWith('/auth')\n  ) {\n    const url = request.nextUrl.clone();\n    url.pathname = '/login';\n    return NextResponse.redirect(url);\n  }\n\n  return supabaseResponse;\n}\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hibino\\otsudenki-portal\\src\\utils\\supabase\\server.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]}]